import{_ as K}from"./Lcixqshc.js";import{_ as q,D as G,r as k,A as E,i as H,x as Z,c as o,a as t,k as J,F as Q,q as W,f as X,g as u,h as f,d as n,v as c,n as p,t as d,E as I,e as Y,G as ee,b as h,w as C,o as a,B as te}from"./DPSIKoxe.js";import{u as se}from"./DOK8vhV6.js";const re={class:"bg-gray-50 min-h-screen flex items-center justify-center p-4 font-['Kanit']"},le={class:"w-full max-w-md p-6 bg-white rounded-lg shadow-lg sm:p-8"},ie={class:"relative mb-10"},oe={class:"relative flex items-center justify-between"},ae={key:0},ne={class:"mb-4"},de={key:0,class:"mt-1 text-xs text-red-600"},ue={key:1,class:"mt-1 text-xs text-gray-500"},me={class:"mb-4"},pe={key:0,class:"mt-1 text-xs text-red-600"},fe={class:"mb-4"},be={key:0,class:"mt-1 text-xs text-red-600"},ce={key:1,class:"mt-1 text-xs text-gray-500"},xe={class:"mb-6"},ge={key:0,class:"mt-1 text-xs text-red-600"},ye={key:1},ve={class:"mb-4"},we={key:0,class:"mt-1 text-xs text-red-600"},ke={class:"mb-4"},Ne={key:0,class:"mt-1 text-xs text-red-600"},he={class:"mb-4"},Ce={key:0,class:"mt-1 text-xs text-red-600"},Fe={class:"mb-6"},_e={class:"flex gap-6"},De={class:"flex items-center"},$e={class:"flex items-center"},Se={key:0,class:"mt-1 text-xs text-red-600"},Pe={key:2},Ue={class:"mb-4"},Ve={key:1,class:"relative"},je=["src"],Ee={key:2,class:"mt-1 text-xs text-red-600"},Ie={class:"mb-4"},Le={key:0,class:"mt-1 text-xs text-red-600"},Me={class:"mb-4"},ze={key:0,class:"mt-1 text-xs text-red-600"},Be={class:"mb-4"},Oe={key:1,class:"relative"},Re=["src"],Ae={key:2,class:"mt-1 text-xs text-red-600"},Te={class:"mb-6"},Ke={class:"flex items-start"},qe={class:"text-sm text-gray-700"},Ge={key:0,class:"mt-1 text-xs text-red-600"},He={class:"flex gap-4"},Ze=["disabled"],Je={key:0,class:"w-5 h-5 mr-3 -ml-1 text-white animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Qe={class:"mt-8 text-sm text-center text-gray-600"},F=3,We={__name:"index_v1",setup(Xe){const{register:L}=se(),M=G(),m=k(1),s=E({username:"",email:"",password:"",confirmPassword:"",firstName:"",lastName:"",phoneNumber:"",gender:"",idCardFile:null,idNumber:"",expiryDate:"",selfieFile:null,pdpa:!1}),r=E({}),y=k(null),v=k(null),x=k(!1);H(()=>{const i=document.createElement("script");i.src="https://kit.fontawesome.com/a076d05399.js",i.crossOrigin="anonymous",document.head.appendChild(i);const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Kanit:wght@400;500;600;700&display=swap",e.rel="stylesheet",document.head.appendChild(e)});const z=Z(()=>`${(m.value-1)/(F-1)*100}%`),B=i=>["บัญชีผู้ใช้","ข้อมูลส่วนตัว","ยืนยันตัวตน"][i-1],O=i=>{let e="flex items-center justify-center w-10 h-10 rounded-full font-semibold transition-all duration-500";return i<m.value?`${e} bg-blue-600 text-white`:i===m.value?`${e} bg-blue-600 text-white ring-4 ring-blue-200`:`${e} bg-gray-300 text-gray-500`},R=i=>{let e="text-xs text-center mt-2 transition-all duration-500";return i<m.value?`${e} font-semibold text-blue-600`:i===m.value?`${e} font-semibold text-blue-600`:`${e} text-gray-500`},w=()=>{Object.keys(r).forEach(i=>delete r[i])},_=[()=>(w(),(!s.username||s.username.length<4)&&(r.username="ชื่อผู้ใช้ต้องมีอย่างน้อย 4 ตัวอักษร"),/^\S+@\S+\.\S+$/.test(s.email)||(r.email="รูปแบบอีเมลไม่ถูกต้อง"),(!s.password||s.password.length<8)&&(r.password="รหัสผ่านต้องมีอย่างน้อย 8 ตัวอักษร"),(s.password!==s.confirmPassword||!s.confirmPassword)&&(r.confirmPassword="รหัสผ่านไม่ตรงกัน"),Object.keys(r).length===0),()=>(w(),s.firstName.trim()||(r.firstName="กรุณากรอกชื่อจริง"),s.lastName.trim()||(r.lastName="กรุณากรอกนามสกุล"),/^\d{9,10}$/.test(s.phoneNumber)||(r.phoneNumber="รูปแบบเบอร์โทรศัพท์ไม่ถูกต้อง"),s.gender||(r.gender="กรุณาเลือกเพศ"),Object.keys(r).length===0),()=>(w(),s.idCardFile||(r.idCardFile="กรุณาอัปโหลดรูปบัตรประชาชน"),/^\d{13}$/.test(s.idNumber)||(r.idNumber="กรุณากรอกหมายเลขบัตรประชาชน 13 หลัก"),(!s.expiryDate.trim()||!/^\d{2}\/\d{2}\/\d{4}$/.test(s.expiryDate))&&(r.expiryDate="กรุณากรอกวันหมดอายุบัตรในรูปแบบ วว/ดด/ปปปป"),s.selfieFile||(r.selfieFile="กรุณาอัปโหลดรูปถ่ายใบหน้า"),s.pdpa||(r.pdpa="กรุณายอมรับข้อตกลงและเงื่อนไข"),Object.keys(r).length===0)],D=()=>{_[m.value-1]()&&m.value<F&&m.value++},$=()=>{m.value>1&&(m.value--,w())},A=async()=>{var i;if(_[m.value-1]()){x.value=!0,await te(),console.log("Form is valid, preparing data to submit...");const e=s.expiryDate.split("/"),b=new Date(`${e[2]}-${e[1]}-${e[0]}`).toISOString(),l=new FormData;l.append("email",s.email),l.append("username",s.username),l.append("password",s.password),l.append("firstName",s.firstName),l.append("lastName",s.lastName),l.append("phoneNumber",s.phoneNumber),l.append("gender",s.gender.toUpperCase()),l.append("nationalIdNumber",s.idNumber),l.append("nationalIdExpiryDate",b),l.append("nationalIdPhotoUrl",s.idCardFile),l.append("selfiePhotoUrl",s.selfieFile);try{await L(l),M.push("/register/success")}catch(g){console.error("Registration failed:",g);const N=((i=g.data)==null?void 0:i.message)||"สมัครสมาชิกไม่สำเร็จ กรุณาลองใหม่อีกครั้ง";alert(N)}finally{x.value=!1}}},S=i=>{var e;(e=document.getElementById(i))==null||e.click()},P=(i,e)=>{var g;const b=(g=i.target.files)==null?void 0:g[0];if(!b)return;const l=new FileReader;l.onload=N=>{var j;const V=(j=N.target)==null?void 0:j.result;e==="idCard"?(y.value=V,s.idCardFile=b,r.idCardFile&&delete r.idCardFile):e==="selfie"&&(v.value=V,s.selfieFile=b,r.selfieFile&&delete r.selfieFile)},l.readAsDataURL(b)},U=i=>{i==="idCard"?(y.value=null,s.idCardFile=null):i==="selfie"&&(v.value=null,s.selfieFile=null)},T=()=>{const e=s.expiryDate.replace(/\D/g,"");e.length<=2?s.expiryDate=e:e.length<=4?s.expiryDate=`${e.slice(0,2)}/${e.slice(2)}`:s.expiryDate=`${e.slice(0,2)}/${e.slice(2,4)}/${e.slice(4,8)}`};return(i,e)=>{const b=K;return a(),o("div",re,[t("main",le,[e[47]||(e[47]=t("h1",{class:"mb-8 text-3xl font-bold text-center text-blue-600"},"สมัครสมาชิก",-1)),t("div",ie,[e[18]||(e[18]=t("div",{class:"absolute left-0 right-0 top-5 h-0.5 bg-gray-200"},null,-1)),t("div",{class:"absolute left-0 top-5 h-0.5 bg-blue-600 transition-all duration-500",style:J({width:z.value})},null,4),t("div",oe,[(a(),o(Q,null,W(F,l=>t("div",{key:l,class:"z-10 flex flex-col items-center w-1/3"},[t("div",{class:p(O(l))},[t("span",null,d(l),1)],2),t("span",{class:p(R(l))},d(B(l)),3)])),64))])]),t("form",{onSubmit:X(A,["prevent"]),novalidate:""},[m.value===1?(a(),o("div",ae,[e[23]||(e[23]=t("h2",{class:"mb-4 text-xl font-semibold text-gray-800"},"ข้อมูลบัญชีผู้ใช้",-1)),t("div",ne,[e[19]||(e[19]=t("label",{for:"username",class:"block mb-1 text-sm font-medium text-gray-700"},[n("ชื่อผู้ใช้ "),t("span",{class:"text-red-500"},"*")],-1)),f(t("input",{type:"text",id:"username","onUpdate:modelValue":e[0]||(e[0]=l=>s.username=l),placeholder:"example123",class:p(["w-full px-4 py-2 transition border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",{"border-red-500 ring-1 ring-red-500":r.username}])},null,2),[[c,s.username]]),r.username?(a(),o("p",de,d(r.username),1)):(a(),o("p",ue,"ความยาว 4–20 ตัวอักษร ภาษาอังกฤษ ตัวเลข หรือขีดล่าง (_) เท่านั้น"))]),t("div",me,[e[20]||(e[20]=t("label",{for:"email",class:"block mb-1 text-sm font-medium text-gray-700"},[n("อีเมล "),t("span",{class:"text-red-500"},"*")],-1)),f(t("input",{type:"email",id:"email","onUpdate:modelValue":e[1]||(e[1]=l=>s.email=l),placeholder:"example@example.com",class:p(["w-full px-4 py-2 transition border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",{"border-red-500 ring-1 ring-red-500":r.email}])},null,2),[[c,s.email]]),r.email?(a(),o("p",pe,d(r.email),1)):u("",!0)]),t("div",fe,[e[21]||(e[21]=t("label",{for:"password",class:"block mb-1 text-sm font-medium text-gray-700"},[n("รหัสผ่าน "),t("span",{class:"text-red-500"},"*")],-1)),f(t("input",{type:"password",id:"password","onUpdate:modelValue":e[2]||(e[2]=l=>s.password=l),placeholder:"อย่างน้อย 8 ตัวอักษร",class:p(["w-full px-4 py-2 transition border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",{"border-red-500 ring-1 ring-red-500":r.password}])},null,2),[[c,s.password]]),r.password?(a(),o("p",be,d(r.password),1)):(a(),o("p",ce,"ต้องประกอบด้วย A–Z, a–z และตัวเลข 0–9"))]),t("div",xe,[e[22]||(e[22]=t("label",{for:"confirmPassword",class:"block mb-1 text-sm font-medium text-gray-700"},[n("ยืนยันรหัสผ่าน "),t("span",{class:"text-red-500"},"*")],-1)),f(t("input",{type:"password",id:"confirmPassword","onUpdate:modelValue":e[3]||(e[3]=l=>s.confirmPassword=l),placeholder:"กรอกรหัสผ่านอีกครั้ง",class:p(["w-full px-4 py-2 transition border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",{"border-red-500 ring-1 ring-red-500":r.confirmPassword}])},null,2),[[c,s.confirmPassword]]),r.confirmPassword?(a(),o("p",ge,d(r.confirmPassword),1)):u("",!0)]),t("button",{type:"button",onClick:D,class:"w-full py-3 font-medium text-white transition bg-blue-600 rounded-md hover:bg-blue-700"},"ถัดไป")])):u("",!0),m.value===2?(a(),o("div",ye,[e[30]||(e[30]=t("h2",{class:"mb-4 text-xl font-semibold text-gray-800"},"ข้อมูลส่วนตัว",-1)),t("div",ve,[e[24]||(e[24]=t("label",{for:"firstName",class:"block mb-1 text-sm font-medium text-gray-700"},[n("ชื่อจริง "),t("span",{class:"text-red-500"},"*")],-1)),f(t("input",{type:"text",id:"firstName","onUpdate:modelValue":e[4]||(e[4]=l=>s.firstName=l),placeholder:"กรอกชื่อจริง",class:p(["w-full px-4 py-2 transition border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",{"border-red-500 ring-1 ring-red-500":r.firstName}])},null,2),[[c,s.firstName]]),r.firstName?(a(),o("p",we,d(r.firstName),1)):u("",!0)]),t("div",ke,[e[25]||(e[25]=t("label",{for:"lastName",class:"block mb-1 text-sm font-medium text-gray-700"},[n("นามสกุล "),t("span",{class:"text-red-500"},"*")],-1)),f(t("input",{type:"text",id:"lastName","onUpdate:modelValue":e[5]||(e[5]=l=>s.lastName=l),placeholder:"กรอกนามสกุล",class:p(["w-full px-4 py-2 transition border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",{"border-red-500 ring-1 ring-red-500":r.lastName}])},null,2),[[c,s.lastName]]),r.lastName?(a(),o("p",Ne,d(r.lastName),1)):u("",!0)]),t("div",he,[e[26]||(e[26]=t("label",{for:"phoneNumber",class:"block mb-1 text-sm font-medium text-gray-700"},[n("เบอร์โทรศัพท์ "),t("span",{class:"text-red-500"},"*")],-1)),f(t("input",{type:"tel",id:"phoneNumber","onUpdate:modelValue":e[6]||(e[6]=l=>s.phoneNumber=l),placeholder:"เช่น 0891234567",class:p(["w-full px-4 py-2 transition border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",{"border-red-500 ring-1 ring-red-500":r.phoneNumber}])},null,2),[[c,s.phoneNumber]]),r.phoneNumber?(a(),o("p",Ce,d(r.phoneNumber),1)):u("",!0)]),t("div",Fe,[e[29]||(e[29]=t("label",{class:"block mb-2 text-sm font-medium text-gray-700"},[n("เพศ "),t("span",{class:"text-red-500"},"*")],-1)),t("div",_e,[t("label",De,[f(t("input",{type:"radio",name:"gender",value:"male","onUpdate:modelValue":e[7]||(e[7]=l=>s.gender=l),class:"mr-2 text-blue-600 focus:ring-blue-500"},null,512),[[I,s.gender]]),e[27]||(e[27]=n(" ชาย"))]),t("label",$e,[f(t("input",{type:"radio",name:"gender",value:"female","onUpdate:modelValue":e[8]||(e[8]=l=>s.gender=l),class:"mr-2 text-blue-600 focus:ring-blue-500"},null,512),[[I,s.gender]]),e[28]||(e[28]=n(" หญิง"))])]),r.gender?(a(),o("p",Se,d(r.gender),1)):u("",!0)]),t("div",{class:"flex gap-4"},[t("button",{type:"button",onClick:$,class:"w-full py-3 font-medium text-white transition bg-gray-600 rounded-md hover:bg-gray-700"},"ย้อนกลับ"),t("button",{type:"button",onClick:D,class:"w-full py-3 font-medium text-white transition bg-blue-600 rounded-md hover:bg-blue-700"},"ถัดไป")])])):u("",!0),m.value===3?(a(),o("div",Pe,[e[43]||(e[43]=t("h2",{class:"mb-4 text-xl font-semibold text-gray-800"},"ยืนยันตัวตน",-1)),t("div",Ue,[e[32]||(e[32]=t("label",{class:"block mb-1 text-sm font-medium text-gray-700"},[n("บัตรประชาชน "),t("span",{class:"text-red-500"},"*")],-1)),y.value?(a(),o("div",Ve,[t("img",{src:y.value,alt:"ID Card Preview",class:"w-full mt-2 rounded-md"},null,8,je),t("button",{type:"button",onClick:e[10]||(e[10]=l=>U("idCard")),class:"absolute flex items-center justify-center w-6 h-6 text-white bg-black bg-opacity-50 rounded-full top-2 right-2"},"×")])):(a(),o("div",{key:0,onClick:e[9]||(e[9]=l=>S("idCardFile")),class:p(["p-6 text-center transition border-2 border-gray-300 border-dashed rounded-md cursor-pointer hover:border-blue-500",{"border-red-500 ring-1 ring-red-500":r.idCardFile}])},e[31]||(e[31]=[t("i",{class:"text-4xl text-gray-400 fa-regular fa-image"},null,-1),t("p",{class:"mt-2 text-sm text-gray-600"},"กดเพื่อเลือกรูปภาพ",-1)]),2)),t("input",{type:"file",id:"idCardFile",onChange:e[11]||(e[11]=l=>P(l,"idCard")),accept:"image/*",class:"hidden"},null,32),r.idCardFile?(a(),o("p",Ee,d(r.idCardFile),1)):u("",!0)]),t("div",Ie,[e[33]||(e[33]=t("label",{for:"idNumber",class:"block mb-1 text-sm font-medium text-gray-700"},[n("หมายเลขบัตรประชาชน "),t("span",{class:"text-red-500"},"*")],-1)),f(t("input",{type:"text",id:"idNumber","onUpdate:modelValue":e[12]||(e[12]=l=>s.idNumber=l),placeholder:"กรอกหมายเลข 13 หลัก",class:p(["w-full px-4 py-2 transition border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",{"border-red-500 ring-1 ring-red-500":r.idNumber}])},null,2),[[c,s.idNumber]]),r.idNumber?(a(),o("p",Le,d(r.idNumber),1)):u("",!0)]),t("div",Me,[e[34]||(e[34]=t("label",{for:"expiryDate",class:"block mb-1 text-sm font-medium text-gray-700"},[n("วันหมดอายุบัตร "),t("span",{class:"text-red-500"},"*")],-1)),f(t("input",{type:"text",id:"expiryDate","onUpdate:modelValue":e[13]||(e[13]=l=>s.expiryDate=l),placeholder:"วว/ดด/ปปปป",onInput:T,maxlength:"10",class:p(["w-full px-4 py-2 transition border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",{"border-red-500 ring-1 ring-red-500":r.expiryDate}])},null,34),[[c,s.expiryDate]]),r.expiryDate?(a(),o("p",ze,d(r.expiryDate),1)):u("",!0)]),t("div",Be,[e[36]||(e[36]=t("label",{class:"block mb-1 text-sm font-medium text-gray-700"},[n("รูปถ่ายใบหน้าปกติ (Selfie) "),t("span",{class:"text-red-500"},"*")],-1)),v.value?(a(),o("div",Oe,[t("img",{src:v.value,alt:"Selfie Preview",class:"w-full mt-2 rounded-md"},null,8,Re),t("button",{type:"button",onClick:e[15]||(e[15]=l=>U("selfie")),class:"absolute flex items-center justify-center w-6 h-6 text-white bg-black bg-opacity-50 rounded-full top-2 right-2"},"×")])):(a(),o("div",{key:0,onClick:e[14]||(e[14]=l=>S("selfieFile")),class:p(["p-6 text-center transition border-2 border-gray-300 border-dashed rounded-md cursor-pointer hover:border-blue-500",{"border-red-500 ring-1 ring-red-500":r.selfieFile}])},e[35]||(e[35]=[t("i",{class:"text-4xl text-gray-400 fa-regular fa-image"},null,-1),t("p",{class:"mt-2 text-sm text-gray-600"},"กดเพื่อเลือกรูปภาพ",-1)]),2)),t("input",{type:"file",id:"selfieFile",onChange:e[16]||(e[16]=l=>P(l,"selfie")),accept:"image/*",class:"hidden"},null,32),r.selfieFile?(a(),o("p",Ae,d(r.selfieFile),1)):u("",!0)]),e[44]||(e[44]=Y('<div class="p-4 mb-4 text-sm text-red-700 border border-red-200 rounded-md bg-red-50" data-v-8c0c79f3><p class="mb-2 font-semibold" data-v-8c0c79f3>ข้อควรหลีกเลี่ยง:</p><ul class="space-y-1" data-v-8c0c79f3><li class="flex items-center" data-v-8c0c79f3><i class="mr-2 text-red-500 fa-solid fa-circle-xmark" data-v-8c0c79f3></i>ใบหน้าไม่ชัดหรือถูกบัง</li><li class="flex items-center" data-v-8c0c79f3><i class="mr-2 text-red-500 fa-solid fa-circle-xmark" data-v-8c0c79f3></i>บัตรไม่ชัดหรือไม่เต็ม</li><li class="flex items-center" data-v-8c0c79f3><i class="mr-2 text-red-500 fa-solid fa-circle-xmark" data-v-8c0c79f3></i>แสงน้อยเกินไป</li><li class="flex items-center" data-v-8c0c79f3><i class="mr-2 text-red-500 fa-solid fa-circle-xmark" data-v-8c0c79f3></i>ระยะไกลเกินไป</li></ul></div>',1)),t("div",Te,[t("label",Ke,[f(t("input",{type:"checkbox","onUpdate:modelValue":e[17]||(e[17]=l=>s.pdpa=l),class:"w-4 h-4 mt-1 mr-3 text-blue-600 border-gray-300 rounded focus:ring-blue-500"},null,512),[[ee,s.pdpa]]),t("span",qe,[e[39]||(e[39]=n("ข้าพเจ้ายินยอมรับ ")),h(b,{to:"/terms-of-service",target:"_blank",rel:"noopener noreferrer",class:"text-blue-600 hover:underline"},{default:C(()=>e[37]||(e[37]=[n("ข้อตกลงและเงื่อนไขฯ")])),_:1,__:[37]}),e[40]||(e[40]=n(" และได้อ่าน ")),h(b,{to:"/privacy",target:"_blank",rel:"noopener noreferrer",class:"text-blue-600 hover:underline"},{default:C(()=>e[38]||(e[38]=[n(" นโยบายความเป็นส่วนตัว")])),_:1,__:[38]}),e[41]||(e[41]=n(" แล้ว "))])]),r.pdpa?(a(),o("p",Ge,d(r.pdpa),1)):u("",!0)]),t("div",He,[t("button",{type:"button",onClick:$,class:"w-full py-3 font-medium text-white transition bg-gray-600 rounded-md hover:bg-gray-700"},"ย้อนกลับ"),t("button",{type:"submit",disabled:x.value,class:"flex items-center justify-center w-full py-3 font-medium text-white transition bg-blue-600 rounded-md hover:bg-blue-700 disabled:bg-blue-400 disabled:cursor-not-allowed"},[x.value?(a(),o("svg",Je,e[42]||(e[42]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):u("",!0),n(" "+d(x.value?"กำลังบันทึก...":"สมัครสมาชิก"),1)],8,Ze)])])):u("",!0)],32),t("p",Qe,[e[46]||(e[46]=n(" มีบัญชีแล้ว? ")),h(b,{to:"/login",class:"font-medium text-blue-600 hover:underline"},{default:C(()=>e[45]||(e[45]=[n("เข้าสู่ระบบ")])),_:1,__:[45]})])])])}}},st=q(We,[["__scopeId","data-v-8c0c79f3"]]);export{st as default};

import{_ as ke,m as Se,r as g,A as Ce,y as se,i as _e,c as w,a as t,b as ne,f as oe,d as C,h,v as _,F as re,q as ie,z as Me,t as T,w as Ie,T as Ae,s as Ve,B as de,o as P,g as ue,C as ce}from"./DPSIKoxe.js";import{u as Te}from"./BaxiziUg.js";import{V as Ne}from"./CGg3eoUs.js";const $e={class:"max-w-4xl px-4 py-8 mx-auto sm:px-6 lg:px-8"},Be={class:"p-8 bg-white border border-gray-300 rounded-lg shadow-md"},Ee={class:"grid grid-cols-1 gap-6 md:grid-cols-2"},Le={class:"relative"},De={class:"relative"},Ue={class:"mt-6"},ze={class:"space-y-4"},Fe=["onUpdate:modelValue","placeholder"],je={class:"absolute inset-y-0 flex items-center gap-2 my-auto right-2"},qe=["onClick"],Oe=["onClick"],We={class:"grid grid-cols-1 gap-6 md:grid-cols-2"},Ke={key:0,class:"grid items-center grid-cols-1 gap-6 md:grid-cols-2"},Ze=["value"],Ge={class:"self-end"},He={key:1,class:"p-8 bg-white border border-gray-300 shadow-xl rounded-xl"},Je={class:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 bg-[#F2F2F2] p-4 md:px-6 md:py-6 rounded-[8px]"},Re={class:"flex justify-end gap-4 pt-6"},Qe=["disabled"],Xe={class:"modal-content"},Ye={class:"flex items-center justify-between p-4 border-b border-gray-300"},et={class:"text-lg font-semibold text-gray-900"},tt={class:"p-4 space-y-3"},lt={class:"text-sm text-gray-700"},at={class:"truncate"},st={key:0,class:"text-gray-500"},nt={class:"flex gap-3 pt-2"},ot=["disabled"],R="__gmapsReadyCreateTrip__",rt={__name:"index",setup(it){var le;const{$api:pe}=Se(),{toast:B}=Ve(),U=g(!1),E=g(!1),O=g([]),p=g([]),N=g([]),W=g([]);let K=[];const o=Ce({vehicleId:"",startPoint:"",endPoint:"",date:"",time:"",availableSeats:null,pricePerSeat:null,conditions:""}),Z=g(null),G=g(null);let M=null,I=null;const A=g({lat:null,lng:null,name:null,address:null,placeId:null}),V=g({lat:null,lng:null,name:null,address:null,placeId:null}),H=g(!1),y=g(null),Q=g(null);let z=null,L=null;const c=g({name:"",lat:null,lng:null});let X=null,D=null;const me=se(),ge=[];(le=window.google)!=null&&le.maps||ge.push({key:"gmaps",src:`https://maps.googleapis.com/maps/api/js?key=${me.public.googleMapsApiKey}&libraries=places&callback=${R}`,async:!0,defer:!0}),Te({});const Y=async()=>{try{const n=await pe("/vehicles");if(O.value=n,n.length>0){const e=n.find(a=>a.isDefault)||n[0];o.vehicleId=e.id}}catch(n){console.error("Failed to fetch vehicles:",n),showErrorToast&&B.error("เกิดข้อผิดพลาด","ไม่สามารถโหลดข้อมูลรถยนต์ได้")}},fe=async()=>{U.value=!1,await Y()},ve=async()=>{if(E.value)return;if(!o.vehicleId||!o.date||!o.time||!o.availableSeats||!o.pricePerSeat){B.error("ข้อมูลไม่ครบถ้วน","กรุณากรอกข้อมูลที่มีเครื่องหมาย * ให้ครบถ้วน");return}E.value=!0;const n=new Date(`${o.date}T${o.time}`).toISOString(),e=N.value.map((s,l)=>{const d=s&&s.name||p.value[l]&&p.value[l].text||null,i=s&&s.address||p.value[l]&&p.value[l].text||null,r=s&&s.lat!=null?Number(s.lat):null,u=s&&s.lng!=null?Number(s.lng):null;return!d&&r==null&&u==null?null:{lat:r,lng:u,name:d,address:i}}).filter(Boolean),a={vehicleId:o.vehicleId,startLocation:{lat:Number(A.value.lat),lng:Number(A.value.lng),name:A.value.name||o.startPoint||null,address:A.value.address||o.startPoint||null},endLocation:{lat:Number(V.value.lat),lng:Number(V.value.lng),name:V.value.name||o.endPoint||null,address:V.value.address||o.endPoint||null},waypoints:e,optimizeWaypoints:!0,departureTime:n,availableSeats:Number(o.availableSeats),pricePerSeat:Number(o.pricePerSeat),conditions:o.conditions};try{const s=se().public.apiBase||"http://localhost:3000/api";let l="";try{const r=document.cookie.match(/(?:^|;\s*)token=([^;]+)/);r&&(l=decodeURIComponent(r[1]))}catch{}if(!l)try{l=localStorage.getItem("token")||""}catch{}const d=await fetch(`${s}/routes`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",...l?{Authorization:`Bearer ${l}`}:{}},body:JSON.stringify(a),credentials:"include"});let i;try{i=await d.json()}catch{const r=await d.text(),u=new Error(r||"Unexpected response from server");throw u.status=d.status,u}if(!d.ok){const r=new Error((i==null?void 0:i.message)||`Request failed with status ${d.status}`);throw r.status=d.status,r.payload=i,r}B.success("สำเร็จ",(i==null?void 0:i.message)||"สร้างเส้นทางการเดินทางเรียบร้อยแล้ว!"),setTimeout(()=>{ce("/findTrip")},1500)}catch(s){console.error("Failed to create route:",s);const l=String((s==null?void 0:s.message)||"");if((s==null?void 0:s.status)===403||/ยืนยันตัวตนผู้ขับ/.test(l)||/ApiError:.*ยืนยันตัวตนผู้ขับ/.test(l))B.error("จำเป็นต้องยืนยันตัวตน","คุณต้องยืนยันตัวตนผู้ขับก่อนจึงจะสร้างเส้นทางได้"),setTimeout(()=>{ce("/profile/driver-verification")},1500);else{const r=l||"ไม่สามารถสร้างเส้นทางได้";B.error("เกิดข้อผิดพลาด",r)}}finally{E.value=!1}};function be(){p.value.push({text:""}),N.value.push({lat:null,lng:null,name:null,address:null,placeId:null}),de(()=>F(p.value.length-1))}function ye(n){p.value.splice(n,1),N.value.splice(n,1);const e=K[n];e&&typeof e.unbindAll=="function"&&e.unbindAll(),K.splice(n,1),W.value.splice(n,1)}function F(n){var l,d;if(!((d=(l=window.google)==null?void 0:l.maps)!=null&&d.places))return;const e=W.value[n];if(!e)return;const a={fields:["place_id","name","formatted_address","geometry"],types:["geocode","establishment"]},s=new google.maps.places.Autocomplete(e,a);K[n]=s,s.addListener("place_changed",()=>{var k,b,f,S,q,ae;const i=s.getPlace();if(!i)return;const r=((f=(b=(k=i.geometry)==null?void 0:k.location)==null?void 0:b.lat)==null?void 0:f.call(b))??null,u=((ae=(q=(S=i.geometry)==null?void 0:S.location)==null?void 0:q.lng)==null?void 0:ae.call(q))??null,v=i.name||$(x(i.formatted_address||""))||p.value[n].text,m=x(i.formatted_address||v||"");p.value[n].text=v,N.value[n]={lat:r,lng:u,name:v,address:m,placeId:i.place_id||null}})}function ee(){var a,s;if(!((s=(a=window.google)==null?void 0:a.maps)!=null&&s.places))return;X=new google.maps.Geocoder;const n=document.createElement("div");D=new google.maps.places.PlacesService(n);const e={fields:["place_id","name","formatted_address","geometry"],types:["geocode","establishment"]};Z.value&&(M!=null&&M.unbindAll&&M.unbindAll(),M=new google.maps.places.Autocomplete(Z.value,e),M.addListener("place_changed",()=>{var v,m,k,b,f,S;const l=M.getPlace();if(!l)return;const d=((k=(m=(v=l.geometry)==null?void 0:v.location)==null?void 0:m.lat)==null?void 0:k.call(m))??null,i=((S=(f=(b=l.geometry)==null?void 0:b.location)==null?void 0:f.lng)==null?void 0:S.call(f))??null,r=l.name||$(x(l.formatted_address||""))||o.startPoint,u=x(l.formatted_address||r||"");o.startPoint=r,A.value={lat:d,lng:i,name:r,address:u,placeId:l.place_id||null}})),G.value&&(I!=null&&I.unbindAll&&I.unbindAll(),I=new google.maps.places.Autocomplete(G.value,e),I.addListener("place_changed",()=>{var v,m,k,b,f,S;const l=I.getPlace();if(!l)return;const d=((k=(m=(v=l.geometry)==null?void 0:v.location)==null?void 0:m.lat)==null?void 0:k.call(m))??null,i=((S=(f=(b=l.geometry)==null?void 0:b.location)==null?void 0:f.lng)==null?void 0:S.call(f))??null,r=l.name||$(x(l.formatted_address||""))||o.endPoint,u=x(l.formatted_address||r||"");o.endPoint=r,V.value={lat:d,lng:i,name:r,address:u,placeId:l.place_id||null}}));for(let l=0;l<p.value.length;l++)F(l)}function J(n){y.value=n,c.value={name:"",lat:null,lng:null},H.value=!0,de(()=>{let e;if(n==="start")e=A.value;else if(n==="end")e=V.value;else if(String(n).startsWith("wp-")){const l=Number(String(n).split("-")[1]||-1);e=N.value[l]||{}}const a=e&&e.lat!=null&&e.lng!=null,s=a?{lat:e.lat,lng:e.lng}:{lat:13.7563,lng:100.5018};z=new google.maps.Map(Q.value,{center:s,zoom:a?14:6,mapTypeControl:!1,streetViewControl:!1,fullscreenControl:!1}),z.addListener("click",l=>{const d=l.latLng;xe(d),te(d)})})}function xe(n){if(L){L.setPosition(n);return}L=new google.maps.Marker({position:n,map:z,draggable:!0}),L.addListener("dragend",e=>{te(e.latLng)})}async function te(n){const e=n.lat(),a=n.lng(),s=await new Promise(i=>{X.geocode({location:{lat:e,lng:a}},(r,u)=>{u==="OK"&&(r!=null&&r.length)?i(r[0]):i(null)})});let l="",d="";if(s!=null&&s.formatted_address&&(d=x(s.formatted_address),l=$(d)),s!=null&&s.place_id&&await new Promise(i=>{D.getDetails({placeId:s.place_id,fields:["name"]},(r,u)=>{u===google.maps.places.PlacesServiceStatus.OK&&(r!=null&&r.name)&&(l=r.name),i()})}),!l||he(l)){const i=await Pe(e,a,150);i!=null&&i.place_id?await new Promise(r=>{D.getDetails({placeId:i.place_id,fields:["name","formatted_address"]},(u,v)=>{if(v===google.maps.places.PlacesServiceStatus.OK){const m=x((u==null?void 0:u.formatted_address)||l);l=(u==null?void 0:u.name)||$(m),d=m||d}r()})}):s!=null&&s.formatted_address&&(d=x(s.formatted_address),l=$(d))}c.value={name:l,address:d||l,lat:e,lng:a}}function we(){if(!y.value||!c.value.name)return;const n={lat:c.value.lat,lng:c.value.lng,name:c.value.name,address:c.value.address||c.value.name,placeId:null};if(y.value==="start")o.startPoint=c.value.name,A.value=n;else if(y.value==="end")o.endPoint=c.value.name,V.value=n;else if(String(y.value).startsWith("wp-")){const e=Number(String(y.value).split("-")[1]||-1);e>-1&&(p.value[e].text=c.value.name,N.value[e]=n)}j()}function j(){H.value=!1,y.value=null,L=null,z=null}function he(n){return n?/^[A-Z0-9]{4,}\+[A-Z0-9]{2,}/i.test(n.trim()):!1}function x(n){return(n||"").replace(/,?\s*(Thailand|ไทย)\s*$/i,"")}function $(n){return(n||"").replace(/^[A-Z0-9]{4,}\+[A-Z0-9]{2,}\s*,?\s*/i,"")}function Pe(n,e,a=120){return new Promise(s=>{if(!D)return s(null);D.nearbySearch({location:{lat:n,lng:e},radius:a},(l,d)=>{d===google.maps.places.PlacesServiceStatus.OK&&(l!=null&&l.length)?s(l[0]):s(null)})})}return _e(()=>{var n,e;if(Y(),(e=(n=window.google)==null?void 0:n.maps)!=null&&e.places){ee();for(let a=0;a<p.value.length;a++)F(a)}else window[R]=()=>{try{delete window[R]}catch{}ee();for(let a=0;a<p.value.length;a++)F(a)}}),(n,e)=>(P(),w("div",null,[t("div",$e,[e[35]||(e[35]=t("div",{class:"mb-8"},[t("h2",{class:"mb-2 text-3xl font-bold text-gray-900"}," สร้างการเดินทางของคุณ "),t("p",{class:"text-gray-600"}," กำหนดจุดเริ่มต้น ปลายทาง และรายละเอียดต่างๆ เพื่อให้ผู้โดยสารมาร่วมทาง ")],-1)),t("div",Be,[t("form",{onSubmit:oe(ve,["prevent"]),id:"postRouteForm",novalidate:"",class:"space-y-8"},[t("div",null,[e[20]||(e[20]=t("h3",{class:"pb-2 mb-6 text-xl font-semibold text-gray-900 border-b border-gray-300"}," ข้อมูลเส้นทาง ",-1)),t("div",Ee,[t("div",null,[e[13]||(e[13]=t("label",{for:"startPoint",class:"block mb-2 text-sm font-medium text-gray-700"},[C(" จุดเริ่มต้น "),t("span",{class:"text-red-500"},"*")],-1)),t("div",Le,[h(t("input",{ref_key:"startInputEl",ref:Z,"onUpdate:modelValue":e[0]||(e[0]=a=>o.startPoint=a),id:"startPoint",name:"startPoint",type:"text",placeholder:"เช่น กรุงเทพมหานคร, ถนนสุขุมวิท",required:"",class:"w-full px-4 py-3 pr-10 border border-gray-300 rounded-md focus:ring-blue-500"},null,512),[[_,o.startPoint]]),t("button",{type:"button",onClick:e[1]||(e[1]=a=>J("start")),class:"absolute inset-y-0 my-auto text-gray-500 right-2 hover:text-blue-600",title:"เลือกจากแผนที่"},e[12]||(e[12]=[t("svg",{class:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[t("path",{d:"M12 2a7 7 0 00-7 7c0 5.25 7 13 7 13s7-7.75 7-13a7 7 0 00-7-7zm0 9.5a2.5 2.5 0 110-5 2.5 2.5 0 010 5z"})],-1)]))])]),t("div",null,[e[15]||(e[15]=t("label",{for:"endPoint",class:"block mb-2 text-sm font-medium text-gray-700"},[C(" จุดปลายทาง "),t("span",{class:"text-red-500"},"*")],-1)),t("div",De,[h(t("input",{ref_key:"endInputEl",ref:G,"onUpdate:modelValue":e[2]||(e[2]=a=>o.endPoint=a),id:"endPoint",name:"endPoint",type:"text",placeholder:"เช่น เชียงใหม่, ถนนนิมมานเหมินท์",required:"",class:"w-full px-4 py-3 pr-10 border border-gray-300 rounded-md focus:ring-blue-500"},null,512),[[_,o.endPoint]]),t("button",{type:"button",onClick:e[3]||(e[3]=a=>J("end")),class:"absolute inset-y-0 my-auto text-gray-500 right-2 hover:text-blue-600",title:"เลือกจากแผนที่"},e[14]||(e[14]=[t("svg",{class:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[t("path",{d:"M12 2a7 7 0 00-7 7c0 5.25 7 13 7 13s7-7.75 7-13a7 7 0 00-7-7zm0 9.5a2.5 2.5 0 110-5 2.5 2.5 0 010 5z"})],-1)]))])])]),t("div",Ue,[e[19]||(e[19]=t("label",{class:"block mb-2 text-sm font-medium text-gray-700"}," จุดแวะ (เพิ่มได้หลายจุด) ",-1)),t("div",ze,[(P(!0),w(re,null,ie(p.value,(a,s)=>(P(),w("div",{key:s,class:"relative"},[h(t("input",{ref_for:!0,ref:l=>W.value[s]=l,"onUpdate:modelValue":l=>a.text=l,type:"text",placeholder:`เช่น จุดรับ-ส่ง ระหว่างทาง (#${s+1})`,class:"w-full px-4 py-3 pr-20 border border-gray-300 rounded-md focus:ring-blue-500"},null,8,Fe),[[_,a.text]]),t("div",je,[t("button",{type:"button",class:"text-gray-500 hover:text-blue-600",onClick:l=>J(`wp-${s}`),title:"เลือกจากแผนที่"},e[16]||(e[16]=[t("svg",{class:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor"},[t("path",{d:"M12 2a7 7 0 00-7 7c0 5.25 7 13 7 13s7-7.75 7-13a7 7 0 00-7-7zm0 9.5a2.5 2.5 0 110-5 2.5 2.5 0 010 5z"})],-1)]),8,qe),t("button",{type:"button",class:"text-gray-500 hover:text-red-600",onClick:l=>ye(s),title:"ลบจุดแวะนี้"},e[17]||(e[17]=[t("svg",{class:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor"},[t("path",{d:"M6 18L18 6M6 6l12 12"})],-1)]),8,Oe)])]))),128)),t("button",{type:"button",onClick:be,class:"inline-flex items-center gap-2 px-3 py-2 text-sm text-white bg-blue-600 rounded-md cursor-pointer hover:bg-blue-700"},e[18]||(e[18]=[t("i",{class:"fa-solid fa-plus"},null,-1),C(" เพิ่มจุดแวะ ")]))])])]),t("div",null,[e[26]||(e[26]=t("h3",{class:"pb-2 mb-6 text-xl font-semibold text-gray-900 border-b border-gray-300"}," รายละเอียดการเดินทาง ",-1)),t("div",We,[t("div",null,[e[21]||(e[21]=t("label",{for:"travelDate",class:"block mb-2 text-sm font-medium text-gray-700"},[C(" วันที่เดินทาง "),t("span",{class:"text-red-500"},"*")],-1)),h(t("input",{"onUpdate:modelValue":e[4]||(e[4]=a=>o.date=a),id:"travelDate",name:"travelDate",type:"date",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-md focus:ring-blue-500"},null,512),[[_,o.date]])]),t("div",null,[e[22]||(e[22]=t("label",{for:"travelTime",class:"block mb-2 text-sm font-medium text-gray-700"},[C(" เวลาออกเดินทาง "),t("span",{class:"text-red-500"},"*")],-1)),h(t("input",{"onUpdate:modelValue":e[5]||(e[5]=a=>o.time=a),id:"travelTime",name:"travelTime",type:"time",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-md focus:ring-blue-500"},null,512),[[_,o.time]])]),t("div",null,[e[23]||(e[23]=t("label",{for:"seatCount",class:"block mb-2 text-sm font-medium text-gray-700"},[C(" จำนวนที่นั่งที่รับได้ "),t("span",{class:"text-red-500"},"*")],-1)),h(t("input",{"onUpdate:modelValue":e[6]||(e[6]=a=>o.availableSeats=a),id:"seatCount",name:"seatCount",type:"number",min:"1",placeholder:"กรอกจำนวนที่นั่ง (เช่น 4)",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-md focus:ring-blue-500"},null,512),[[_,o.availableSeats,void 0,{number:!0}]]),e[24]||(e[24]=t("p",{class:"mt-1 text-xs text-gray-500"}," รถยนต์ส่วนบุคคลทั่วไปมี 4–5 ที่นั่ง หากใช้รถตู้/รถบัส ให้ระบุจำนวนได้ตามจริง ",-1))]),t("div",null,[e[25]||(e[25]=t("label",{for:"pricePerSeat",class:"block mb-2 text-sm font-medium text-gray-700"},[C(" ราคาต่อที่นั่ง (บาท) "),t("span",{class:"text-red-500"},"*")],-1)),h(t("input",{"onUpdate:modelValue":e[7]||(e[7]=a=>o.pricePerSeat=a),id:"pricePerSeat",name:"pricePerSeat",type:"number",min:"0",placeholder:"เช่น 250",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-md focus:ring-blue-500"},null,512),[[_,o.pricePerSeat,void 0,{number:!0}]])])])]),t("div",null,[e[30]||(e[30]=t("h3",{class:"pb-2 mb-6 text-xl font-semibold text-gray-900 border-b border-gray-300"}," ข้อมูลรถยนต์ ",-1)),O.value.length>0?(P(),w("div",Ke,[t("div",null,[e[28]||(e[28]=t("label",{for:"vehicle",class:"block mb-2 text-sm font-medium text-gray-700"},[C(" เลือกรถยนต์ที่จะใช้ "),t("span",{class:"text-red-500"},"*")],-1)),h(t("select",{"onUpdate:modelValue":e[8]||(e[8]=a=>o.vehicleId=a),id:"vehicle",name:"vehicle",class:"w-full px-4 py-3 border border-gray-300 rounded-md focus:ring-blue-500"},[e[27]||(e[27]=t("option",{disabled:"",value:""},"กรุณาเลือกรถยนต์",-1)),(P(!0),w(re,null,ie(O.value,a=>(P(),w("option",{key:a.id,value:a.id},T(a.vehicleModel)+" ("+T(a.licensePlate)+") ",9,Ze))),128))],512),[[Me,o.vehicleId]])]),t("div",Ge,[t("button",{type:"button",onClick:e[9]||(e[9]=a=>U.value=!0),class:"w-full px-4 py-3 text-sm text-gray-800 transition-colors bg-gray-100 rounded-md cursor-pointer md:w-auto hover:bg-gray-200"}," เพิ่ม / จัดการข้อมูลรถยนต์ ")])])):(P(),w("div",He,[t("div",Je,[e[29]||(e[29]=t("p",{class:"text-gray-800 text-base md:text-[18px] text-center sm:text-left"}," คุณยังไม่มีข้อมูลรถยนต์ ",-1)),t("button",{type:"button",onClick:e[10]||(e[10]=a=>U.value=!0),class:"bg-[#2563EB] hover:bg-blue-600 text-white text-sm md:text-[16px] px-4 py-2 rounded-lg transition-colors whitespace-nowrap"}," เพิ่ม / จัดการข้อมูล ")])]))]),ne(Ne,{show:U.value,onClose:fe},null,8,["show"]),t("div",null,[e[31]||(e[31]=t("h3",{class:"pb-2 mb-6 text-xl font-semibold text-gray-900 border-b border-gray-300"}," เงื่อนไขและข้อตกลง ",-1)),h(t("textarea",{"onUpdate:modelValue":e[11]||(e[11]=a=>o.conditions=a),id:"terms",name:"terms",rows:"4",placeholder:"ระบุเงื่อนไข เช่น ไม่สูบบุหรี่, ไม่นำสัตว์เลี้ยง, ชำระเงินล่วงหน้า 50%",class:"w-full px-4 py-3 border border-gray-300 rounded-md resize-none focus:ring-blue-500"},null,512),[[_,o.conditions]])]),t("div",Re,[e[32]||(e[32]=t("button",{type:"button",class:"px-6 py-3 text-gray-700 border border-gray-300 rounded-md cursor-pointer hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500"}," ยกเลิก ",-1)),t("button",{type:"submit",disabled:E.value,class:"px-6 py-3 font-medium text-white bg-blue-600 rounded-md cursor-pointer hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-400 disabled:cursor-not-allowed"},T(E.value?"กำลังสร้าง...":"สร้างการเดินทาง"),9,Qe)])],32)]),ne(Ae,{name:"modal-fade"},{default:Ie(()=>[H.value?(P(),w("div",{key:0,class:"modal-overlay",onClick:oe(j,["self"])},[t("div",Xe,[t("div",Ye,[t("h3",et," เลือก "+T(y.value==="start"?"จุดเริ่มต้น":y.value==="end"?"จุดปลายทาง":"จุดแวะ"),1),t("button",{onClick:j,class:"text-gray-400 hover:text-gray-600"},e[33]||(e[33]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),t("div",tt,[t("div",{ref_key:"placePickerMapEl",ref:Q,class:"w-full border border-gray-200 rounded-md h-80"},null,512),t("div",lt,[e[34]||(e[34]=t("div",{class:"font-medium"},"ตำแหน่งที่เลือก:",-1)),t("div",at,T(c.value.name||"— ยังไม่เลือก —"),1),c.value.lat&&c.value.lng?(P(),w("div",st," lat: "+T(c.value.lat.toFixed(6))+", lng: "+T(c.value.lng.toFixed(6)),1)):ue("",!0)]),t("div",nt,[t("button",{onClick:j,class:"flex-1 px-4 py-2 font-semibold text-gray-800 bg-gray-200 rounded-md hover:bg-gray-300"}," ยกเลิก "),t("button",{disabled:!c.value.name,onClick:we,class:"flex-1 px-4 py-2 font-semibold text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed"}," ใช้ตำแหน่งนี้ ",8,ot)])])])])):ue("",!0)]),_:1})])]))}},pt=ke(rt,[["__scopeId","data-v-6c462c16"]]);export{pt as default};

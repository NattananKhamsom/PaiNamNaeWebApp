import{_ as Ce}from"./Lcixqshc.js";import{_ as Ve,a5 as Me,J as Se,A as ae,r as v,x as re,i as Ie,y as Ue,c as u,b as z,a as t,w as ie,l as $e,f as de,h as r,g as L,v as i,F as D,q as F,z as Te,d as ue,t as g,T as Be,B as ce,s as Pe,C as pe,o as c}from"./DPSIKoxe.js";import{u as Ae}from"./BaxiziUg.js";import{A as ze,_ as Ee}from"./CaCOxDSn.js";import{d as H}from"./B5yDJBm8.js";import{b as Ne}from"./C5FTVxxA.js";import"./DOK8vhV6.js";import"./Cpj98o6Y.js";const Re={id:"main-content",class:"main-content mt-16 ml-0 lg:ml-[280px] p-6 min-h-screen"},je={class:"mx-auto max-w-7xl"},De={class:"mb-8"},Fe={class:"flex w-full overflow-hidden bg-white border border-gray-300 rounded-lg shadow-lg"},He={class:"flex-1 p-6 sm:p-8"},Oe={class:"space-y-4"},Ye={class:"relative"},qe={key:0,class:"absolute z-20 w-full mt-1 overflow-auto bg-white border rounded-md shadow max-h-60"},We=["onClick"],Ge={class:"text-sm font-medium text-gray-800"},Je={key:0,class:"text-xs text-gray-500"},Ke={class:"text-xs text-gray-500"},Qe={key:0,class:"px-3 py-2 text-sm text-gray-500"},Xe={key:1,class:"mt-2 text-sm text-amber-600"},Ze=["disabled"],et=["value"],tt={key:0,class:"mt-2 text-sm text-gray-500"},ot={class:"space-y-6"},lt={class:"overflow-hidden border border-gray-300 rounded-lg"},nt={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},st={class:"space-y-2"},at={class:"grid grid-cols-2 gap-2"},rt={class:"space-y-2"},it={class:"grid grid-cols-2 gap-2"},dt={class:"space-y-4"},ut={class:"grid grid-cols-1 gap-2 sm:grid-cols-2"},ct=["onUpdate:modelValue"],pt=["onUpdate:modelValue"],mt=["onUpdate:modelValue"],gt=["onUpdate:modelValue"],bt={class:"flex gap-2 mt-2"},ft=["onClick"],yt=["onClick"],vt={class:"grid grid-cols-1 gap-4 sm:grid-cols-3"},xt={class:"sm:col-span-1"},ht={class:"flex justify-end gap-4 pt-4"},wt=["disabled"],Lt=["disabled"],kt={key:0,class:"w-5 h-5 mr-3 -ml-1 text-white animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},_t={class:"bg-white rounded-xl w-[95%] max-w-3xl overflow-hidden shadow-xl"},Ct={class:"p-4 border-b"},Vt={class:"font-semibold text-gray-800"},Mt={class:"p-0"},St={class:"flex items-center justify-between p-4 border-t"},It={class:"text-sm text-gray-700 truncate"},Ut={class:"truncate"},$t=["disabled"],O="__gmapsReadyAdminRouteEdit__",Tt={__name:"edit_v1",setup(Bt){var X;H.locale("th"),H.extend(Ne),Ae({});const{toast:T}=Pe(),V=Me(),M=Ue(),x=((X=Se("token"))==null?void 0:X.value)||localStorage.getItem("token"),o=ae({driverId:"",vehicleId:"",startLocation:{lat:null,lng:null,name:"",address:""},endLocation:{lat:null,lng:null,name:"",address:""},waypoints:[],availableSeats:0,pricePerSeat:0,conditions:"",departureTimeISO:""}),S=v(""),Y=re(()=>{const n=o.startLocation,e=o.endLocation;return o.driverId&&o.vehicleId&&n.lat!=null&&n.lng!=null&&e.lat!=null&&e.lng!=null&&S.value}),k=v(""),q=v(""),w=v([]),B=v(!1),me=re(()=>k.value&&(B.value||w.value.length>0));let W=null;async function ge(){k.value!==q.value&&(o.driverId=""),clearTimeout(W);const n=k.value.trim();if(!n){w.value=[];return}W=setTimeout(async()=>{try{B.value=!0;const e=await $fetch("/users/admin",{baseURL:M.public.apiBase,headers:{Accept:"application/json",...x?{Authorization:`Bearer ${x}`}:{}},query:{q:n,page:1,limit:10}});w.value=(e==null?void 0:e.data)||[]}catch(e){console.error("search drivers error:",e),w.value=[]}finally{B.value=!1}},300)}function be(n){o.driverId=n.id;const e=`${n.firstName||""} ${n.lastName||""} (${n.email})`;k.value=e,q.value=e,w.value=[],G(n.id)}const _=v([]);async function G(n){try{if(_.value=[],o.vehicleId="",!n)return;const e=await $fetch(`/vehicles/admin/user/${n}`,{baseURL:M.public.apiBase,headers:{Accept:"application/json",...x?{Authorization:`Bearer ${x}`}:{}}});_.value=(e==null?void 0:e.data)||[]}catch(e){console.error("vehicles error:",e),_.value=[]}}function fe(){o.waypoints.push({lat:null,lng:null,name:"",address:""})}function ye(n){o.waypoints.splice(n,1),P()}const E=v(null);let b=null,J=!1,I=null,U=null,N=[];function R(){!E.value||b||(b=new google.maps.Map(E.value,{center:{lat:13.7563,lng:100.5018},zoom:6,mapTypeControl:!1,streetViewControl:!1,fullscreenControl:!0}),J=!0,setTimeout(()=>google.maps.event.trigger(b,"resize"),0))}function ve(){I&&(I.setMap(null),I=null),U&&(U.setMap(null),U=null),N.forEach(n=>n.setMap(null)),N=[]}function P(){if(!J)return;ve();const n=new google.maps.LatLngBounds;f(o.startLocation.lat)&&f(o.startLocation.lng)&&(I=new google.maps.Marker({map:b,position:{lat:+o.startLocation.lat,lng:+o.startLocation.lng},label:"A"}),n.extend(I.getPosition())),f(o.endLocation.lat)&&f(o.endLocation.lng)&&(U=new google.maps.Marker({map:b,position:{lat:+o.endLocation.lat,lng:+o.endLocation.lng},label:"B"}),n.extend(U.getPosition())),o.waypoints.forEach((e,p)=>{if(f(e.lat)&&f(e.lng)){const l=new google.maps.Marker({map:b,position:{lat:+e.lat,lng:+e.lng},icon:"http://maps.google.com/mapfiles/ms/icons/green-dot.png",title:e.name||`Waypoint ${p+1}`});N.push(l),n.extend(l.getPosition())}}),n.isEmpty()||(b.fitBounds(n),setTimeout(()=>{google.maps.event.trigger(b,"resize"),b.fitBounds(n)},0))}function f(n){return typeof n=="number"&&!Number.isNaN(n)}const s=ae({show:!1,mode:null,index:null,lat:null,lng:null}),K=v(null);let A=null,$=null;function j(n,e=null){s.show=!0,s.mode=n,s.index=e,s.lat=null,s.lng=null,ce(()=>{const p={lat:13.7563,lng:100.5018},l=n==="start"?o.startLocation:n==="end"?o.endLocation:o.waypoints[e]||{},m=f(l.lat)&&f(l.lng)?{lat:+l.lat,lng:+l.lng}:p;A=new google.maps.Map(K.value,{center:m,zoom:f(l.lat)?15:6,mapTypeControl:!1,streetViewControl:!1,fullscreenControl:!1}),A.addListener("click",d=>{xe(d.latLng),s.lat=d.latLng.lat(),s.lng=d.latLng.lng()})})}function xe(n){if($)return $.setPosition(n);$=new google.maps.Marker({map:A,position:n,draggable:!0}),$.addListener("dragend",e=>{s.lat=e.latLng.lat(),s.lng=e.latLng.lng()})}function Q(){s.show=!1,s.mode=null,s.index=null,$=null,A=null}function he(){if(!(s.lat==null||s.lng==null)){if(s.mode==="start")o.startLocation.lat=s.lat,o.startLocation.lng=s.lng;else if(s.mode==="end")o.endLocation.lat=s.lat,o.endLocation.lng=s.lng;else if(s.mode==="waypoint"&&s.index!=null){const n=o.waypoints[s.index];n&&(n.lat=s.lat,n.lng=s.lng)}Q(),P()}}async function we(){var n,e,p,l,m,d,Z,ee,te,oe,le,ne,se;try{const h=await $fetch(`/routes/admin/${V.params.id}`,{baseURL:M.public.apiBase,headers:{Accept:"application/json",...x?{Authorization:`Bearer ${x}`}:{}}}),a=h==null?void 0:h.data;if(!a)throw new Error("Invalid response");o.driverId=((n=a.driver)==null?void 0:n.id)||"",o.vehicleId=((e=a.vehicle)==null?void 0:e.id)||"",o.startLocation={lat:((p=a.startLocation)==null?void 0:p.lat)??null,lng:((l=a.startLocation)==null?void 0:l.lng)??null,name:((m=a.startLocation)==null?void 0:m.name)||"",address:((d=a.startLocation)==null?void 0:d.address)||""},o.endLocation={lat:((Z=a.endLocation)==null?void 0:Z.lat)??null,lng:((ee=a.endLocation)==null?void 0:ee.lng)??null,name:((te=a.endLocation)==null?void 0:te.name)||"",address:((oe=a.endLocation)==null?void 0:oe.address)||""},o.waypoints=Array.isArray((le=a.waypoints)==null?void 0:le.used)?a.waypoints.used.map(y=>({lat:y.lat??null,lng:y.lng??null,name:y.name||"",address:y.address||""})):Array.isArray(a.waypoints)?a.waypoints.map(y=>({lat:y.lat??null,lng:y.lng??null,name:y.name||"",address:y.address||""})):[],o.availableSeats=a.availableSeats??0,o.pricePerSeat=a.pricePerSeat??0,o.conditions=a.conditions||"",o.departureTimeISO=a.departureTime||"",S.value=a.departureTime?H(a.departureTime).format("YYYY-MM-DDTHH:mm"):"",o.driverId&&await G(o.driverId),(ne=window.google)!=null&&ne.maps&&(R(),ce(P))}catch(h){console.error("fetch route error:",h),T.error("เกิดข้อผิดพลาด",((se=h==null?void 0:h.data)==null?void 0:se.message)||"โหลดข้อมูลเส้นทางไม่สำเร็จ")}}const C=v(!1);async function Le(){var n;if(!Y.value){T.warning("ข้อมูลไม่ครบ","กรุณากรอกข้อมูลให้ครบถ้วน");return}C.value=!0;try{const e={driverId:o.driverId,vehicleId:o.vehicleId,startLocation:{...o.startLocation},endLocation:{...o.endLocation},waypoints:o.waypoints.map(p=>({lat:+p.lat,lng:+p.lng,name:p.name||"",address:p.address||""})),departureTime:new Date(S.value).toISOString(),availableSeats:+o.availableSeats,pricePerSeat:+o.pricePerSeat,conditions:o.conditions||""};await $fetch(`/routes/admin/${V.params.id}`,{baseURL:M.public.apiBase,method:"PUT",headers:{"Content-Type":"application/json",...x?{Authorization:`Bearer ${x}`}:{}},body:e}),T.success("บันทึกสำเร็จ","อัปเดตข้อมูลเส้นทางแล้ว"),pe(`/admin/routes/${V.params.id}`).catch(()=>{})}catch(e){console.error("update route error:",e),T.error("เกิดข้อผิดพลาด",((n=e==null?void 0:e.data)==null?void 0:n.message)||"ไม่สามารถบันทึกการแก้ไขได้")}finally{C.value=!1}}function ke(){pe(`/admin/routes/${V.params.id}`)}function _e(){const n=document.getElementById("sidebar"),e=document.getElementById("overlay");!n||!e||(n.classList.remove("mobile-open"),e.classList.add("hidden"))}return Ie(async()=>{var n;if((n=window.google)!=null&&n.maps)R();else{const e=document.createElement("script");e.src=`https://maps.googleapis.com/maps/api/js?key=${M.public.googleMapsApiKey}&libraries=places,geometry&callback=${O}`,e.async=!0,e.defer=!0,window[O]=()=>{try{delete window[O]}catch{}R(),P()},document.head.appendChild(e)}await we()}),(n,e)=>{const p=Ce;return c(),u("div",null,[z(ze),z(Ee),t("main",Re,[t("div",je,[t("div",De,[z(p,{to:`/admin/routes/${$e(V).params.id}`,class:"inline-flex items-center gap-2 px-3 py-2 border border-gray-300 rounded-md hover:bg-gray-50"},{default:ie(()=>e[16]||(e[16]=[t("i",{class:"fa-solid fa-arrow-left"},null,-1),t("span",null,"ย้อนกลับ",-1)])),_:1,__:[16]},8,["to"])]),e[31]||(e[31]=t("div",{class:"flex flex-col gap-3 mb-6 sm:flex-row sm:items-center sm:justify-between"},[t("div",{class:"flex items-center gap-3"},[t("h1",{class:"text-2xl font-semibold text-gray-800"},"แก้ไขเส้นทาง (แอดมิน)"),t("span",{class:"text-sm text-gray-500"},"อัปเดตข้อมูลเส้นทางสำหรับผู้ขับและรถที่เลือก")])],-1)),t("div",Fe,[t("main",He,[t("form",{onSubmit:de(Le,["prevent"]),class:"space-y-10"},[t("section",Oe,[e[20]||(e[20]=t("h2",{class:"text-lg font-semibold text-gray-800"},"ผู้ขับขี่และรถยนต์",-1)),t("div",Ye,[e[17]||(e[17]=t("label",{class:"block mb-2 text-sm font-medium text-gray-700"},"ค้นหาผู้ขับ (อีเมล / ชื่อ / Username)",-1)),r(t("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>k.value=l),onInput:ge,type:"text",placeholder:"เช่น user@gmail.com หรือ ชื่อ",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"},null,544),[[i,k.value,void 0,{trim:!0}]]),me.value?(c(),u("div",qe,[(c(!0),u(D,null,F(w.value,l=>(c(),u("button",{key:l.id,type:"button",onClick:m=>be(l),class:"w-full px-3 py-2 text-left hover:bg-blue-50"},[t("div",Ge,[ue(g(l.firstName)+" "+g(l.lastName)+" ",1),l.username?(c(),u("span",Je,"(@"+g(l.username)+")",1)):L("",!0)]),t("div",Ke,g(l.email),1)],8,We))),128)),!B.value&&w.value.length===0?(c(),u("div",Qe," ไม่พบผู้ใช้ที่ตรงกับคำค้น ")):L("",!0)])):L("",!0),o.driverId?L("",!0):(c(),u("p",Xe," * ต้องเลือกผู้ขับจากรายการ "))]),t("div",null,[e[19]||(e[19]=t("label",{class:"block mb-2 text-sm font-medium text-gray-700"},"เลือกรถของผู้ขับ",-1)),r(t("select",{"onUpdate:modelValue":e[1]||(e[1]=l=>o.vehicleId=l),disabled:!o.driverId||_.value.length===0,class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100"},[e[18]||(e[18]=t("option",{disabled:"",value:""},"— กรุณาเลือก —",-1)),(c(!0),u(D,null,F(_.value,l=>(c(),u("option",{key:l.id,value:l.id},g(l.vehicleModel)+" ("+g(l.vehicleType)+") • "+g(l.licensePlate||"—"),9,et))),128))],8,Ze),[[Te,o.vehicleId]]),o.driverId&&_.value.length===0?(c(),u("p",tt," * ผู้ขับรายนี้ยังไม่มีรถในระบบ ")):L("",!0)])]),t("section",ot,[e[29]||(e[29]=t("h2",{class:"text-lg font-semibold text-gray-800"},"ข้อมูลเส้นทาง",-1)),t("div",null,[e[21]||(e[21]=t("h3",{class:"mb-2 text-sm font-semibold text-gray-700"},"แผนที่เส้นทาง",-1)),t("div",lt,[t("div",{ref_key:"mapEl",ref:E,class:"w-full",style:{height:"360px"}},null,512)])]),t("div",nt,[t("div",null,[e[22]||(e[22]=t("label",{class:"block mb-1 text-xs font-medium text-gray-600"},"จุดเริ่มต้น",-1)),t("div",st,[r(t("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>o.startLocation.name=l),type:"text",placeholder:"ชื่อสถานที่",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[i,o.startLocation.name]]),r(t("input",{"onUpdate:modelValue":e[3]||(e[3]=l=>o.startLocation.address=l),type:"text",placeholder:"ที่อยู่",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[i,o.startLocation.address]]),t("div",at,[r(t("input",{"onUpdate:modelValue":e[4]||(e[4]=l=>o.startLocation.lat=l),type:"number",step:"any",placeholder:"lat",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[i,o.startLocation.lat,void 0,{number:!0}]]),r(t("input",{"onUpdate:modelValue":e[5]||(e[5]=l=>o.startLocation.lng=l),type:"number",step:"any",placeholder:"lng",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[i,o.startLocation.lng,void 0,{number:!0}]])]),t("button",{type:"button",onClick:e[6]||(e[6]=l=>j("start")),class:"px-3 py-2 text-sm border border-gray-300 rounded-md hover:bg-gray-50"}," เลือกจากแผนที่ ")])]),t("div",null,[e[23]||(e[23]=t("label",{class:"block mb-1 text-xs font-medium text-gray-600"},"จุดปลายทาง",-1)),t("div",rt,[r(t("input",{"onUpdate:modelValue":e[7]||(e[7]=l=>o.endLocation.name=l),type:"text",placeholder:"ชื่อสถานที่",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[i,o.endLocation.name]]),r(t("input",{"onUpdate:modelValue":e[8]||(e[8]=l=>o.endLocation.address=l),type:"text",placeholder:"ที่อยู่",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[i,o.endLocation.address]]),t("div",it,[r(t("input",{"onUpdate:modelValue":e[9]||(e[9]=l=>o.endLocation.lat=l),type:"number",step:"any",placeholder:"lat",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[i,o.endLocation.lat,void 0,{number:!0}]]),r(t("input",{"onUpdate:modelValue":e[10]||(e[10]=l=>o.endLocation.lng=l),type:"number",step:"any",placeholder:"lng",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[i,o.endLocation.lng,void 0,{number:!0}]])]),t("button",{type:"button",onClick:e[11]||(e[11]=l=>j("end")),class:"px-3 py-2 text-sm border border-gray-300 rounded-md hover:bg-gray-50"}," เลือกจากแผนที่ ")])])]),t("div",null,[e[24]||(e[24]=t("h3",{class:"mb-2 text-sm font-semibold text-gray-700"},"จุดแวะระหว่างทาง",-1)),t("div",dt,[(c(!0),u(D,null,F(o.waypoints,(l,m)=>(c(),u("div",{key:m,class:"p-3 border rounded-md"},[t("div",ut,[r(t("input",{"onUpdate:modelValue":d=>l.name=d,type:"text",placeholder:"ชื่อจุดแวะ",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,8,ct),[[i,l.name]]),r(t("input",{"onUpdate:modelValue":d=>l.address=d,type:"text",placeholder:"ที่อยู่",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,8,pt),[[i,l.address]]),r(t("input",{"onUpdate:modelValue":d=>l.lat=d,type:"number",step:"any",placeholder:"lat",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,8,mt),[[i,l.lat,void 0,{number:!0}]]),r(t("input",{"onUpdate:modelValue":d=>l.lng=d,type:"number",step:"any",placeholder:"lng",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,8,gt),[[i,l.lng,void 0,{number:!0}]])]),t("div",bt,[t("button",{type:"button",onClick:d=>j("waypoint",m),class:"px-3 py-1.5 text-sm border border-gray-300 rounded-md hover:bg-gray-50"}," เลือกจากแผนที่ ",8,ft),t("button",{type:"button",onClick:d=>ye(m),class:"px-3 py-1.5 text-sm border border-red-300 text-red-700 rounded-md hover:bg-red-50"}," ลบจุดแวะ ",8,yt)])]))),128)),t("button",{type:"button",onClick:fe,class:"px-4 py-2 text-sm bg-gray-100 border rounded-md hover:bg-gray-200"}," + เพิ่มจุดแวะ ")])]),t("div",vt,[t("div",xt,[e[25]||(e[25]=t("label",{class:"block mb-1 text-xs font-medium text-gray-600"},"วัน-เวลาออกเดินทาง",-1)),r(t("input",{"onUpdate:modelValue":e[12]||(e[12]=l=>S.value=l),type:"datetime-local",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[i,S.value]])]),t("div",null,[e[26]||(e[26]=t("label",{class:"block mb-1 text-xs font-medium text-gray-600"},"ราคา/ที่นั่ง (บาท)",-1)),r(t("input",{"onUpdate:modelValue":e[13]||(e[13]=l=>o.pricePerSeat=l),type:"number",min:"0",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[i,o.pricePerSeat,void 0,{number:!0}]])]),t("div",null,[e[27]||(e[27]=t("label",{class:"block mb-1 text-xs font-medium text-gray-600"},"ที่นั่งคงเหลือ",-1)),r(t("input",{"onUpdate:modelValue":e[14]||(e[14]=l=>o.availableSeats=l),type:"number",min:"0",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[i,o.availableSeats,void 0,{number:!0}]])])]),t("div",null,[e[28]||(e[28]=t("label",{class:"block mb-1 text-xs font-medium text-gray-600"},"เงื่อนไขการเดินทาง",-1)),r(t("textarea",{"onUpdate:modelValue":e[15]||(e[15]=l=>o.conditions=l),rows:"4",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"ระบุเงื่อนไขเพิ่มเติม เช่น ไม่เปิดเพลงเสียงดัง ฯลฯ"},null,512),[[i,o.conditions]])])]),t("div",ht,[t("button",{type:"button",disabled:C.value,onClick:ke,class:"px-6 py-3 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-400 disabled:opacity-50"}," ยกเลิก ",8,wt),t("button",{type:"submit",disabled:!Y.value||C.value,class:"flex items-center px-6 py-3 font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-blue-400 disabled:cursor-not-allowed"},[C.value?(c(),u("svg",kt,e[30]||(e[30]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):L("",!0),ue(" "+g(C.value?"กำลังบันทึก...":"บันทึกการแก้ไข"),1)],8,Lt)])],32)])])])]),t("div",{id:"overlay",class:"fixed inset-0 z-40 hidden bg-black bg-opacity-50 lg:hidden",onClick:_e}),z(Be,{name:"modal-fade"},{default:ie(()=>{var l,m;return[s.show?(c(),u("div",{key:0,class:"fixed inset-0 z-[1000] bg-black/60 flex items-center justify-center",onClick:de(Q,["self"])},[t("div",_t,[t("div",Ct,[t("div",Vt," เลือกตำแหน่ง"+g(s.mode==="start"?"จุดเริ่มต้น":s.mode==="end"?"จุดปลายทาง":"จุดแวะ"),1)]),t("div",Mt,[t("div",{ref_key:"pickerMapEl",ref:K,class:"w-full",style:{height:"70vh"}},null,512),t("div",St,[t("div",It,[e[32]||(e[32]=t("span",{class:"font-medium"},"ตำแหน่ง:",-1)),t("span",Ut,"lat: "+g(((l=s.lat)==null?void 0:l.toFixed(6))||"-")+", lng: "+g(((m=s.lng)==null?void 0:m.toFixed(6))||"-"),1)]),t("button",{class:"px-4 py-2 text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed",disabled:s.lat==null||s.lng==null,onClick:he}," ใช้ตำแหน่งนี้ ",8,$t)])])])])):L("",!0)]}),_:1})])}}},Ft=Ve(Tt,[["__scopeId","data-v-8ac36c36"]]);export{Ft as default};

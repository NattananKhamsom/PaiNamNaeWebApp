import{_ as B,m as T,r as v,A as E,x as S,i as U,c as n,a as t,b as H,e as d,g as I,n as F,t as f,f as G,h as m,d as c,v as x,z as q,o,s as $}from"./DPSIKoxe.js";import{_ as J}from"./BE2kpsnt.js";import"./Lcixqshc.js";const Y={class:"bg-gray-50"},K={class:"flex items-center justify-center min-h-screen py-8"},Q={class:"flex w-full max-w-6xl mx-4 overflow-hidden bg-white border border-gray-300 rounded-lg shadow-lg"},W={class:"flex-1 p-8"},X={class:"mb-8"},Z={class:"p-6 bg-white border border-gray-300 shadow rounded-xl"},ee={class:"flex items-center justify-between mb-4"},te={key:0,class:"text-gray-500"},se={key:1,class:"grid grid-cols-1 gap-4 md:grid-cols-2"},le={class:"font-medium text-gray-900"},ae={class:"font-medium text-gray-900"},ie={class:"flex items-center font-medium text-gray-900 break-all"},ne=["aria-label"],oe={key:0,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},re={key:1,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},de={class:"font-medium text-gray-900"},fe={class:"font-medium text-gray-900"},ce={class:"font-medium text-gray-900"},ue={key:2,class:"text-gray-500"},ve={class:"p-8 bg-white rounded-xl"},me={class:"relative"},pe={class:"grid gap-6 mb-6 md:grid-cols-2"},xe={key:0,class:"text-center"},ge=["src"],be={class:"relative"},ye={class:"grid gap-6 mb-6 md:grid-cols-2"},he={key:0,class:"text-center"},we=["src"],ke={class:"relative"},Pe={class:"grid grid-cols-1 gap-4 mb-6 md:grid-cols-2"},Le={class:"flex justify-end gap-4 pt-6"},Ne=["disabled"],Oe=["disabled"],De={key:0,class:"w-5 h-5 mr-3 -ml-1 text-white animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Ee={__name:"driver-verification",setup(Ie){const{$api:w}=T(),{toast:y}=$(),u=v(!1),g=v(null),b=v(null),s=E({licenseNumber:"",firstNameOnLicense:"",lastNameOnLicense:"",licenseIssueDate:"",licenseExpiryDate:"",typeOnLicense:"",licensePhoto:null,selfiePhoto:null}),r=E({licensePhoto:"",selfiePhoto:""}),i=v(null),h=v(!1),p=v(!1),C={PRIVATE_CAR_TEMPORARY:"รถยนต์ส่วนบุคคลชั่วคราว (2 ปี)",PRIVATE_CAR:"รถยนต์ส่วนบุคคล (5 ปี)",PUBLIC_CAR:"รถยนต์สาธารณะ",LIFETIME:"ตลอดชีพ"},M={PENDING:"กำลังตรวจสอบ",APPROVED:"อนุมัติแล้ว",REJECTED:"ถูกปฏิเสธ"},V=l=>C[l]||l,k=l=>{if(!l)return"-";try{return new Date(l).toLocaleDateString("th-TH",{day:"2-digit",month:"long",year:"numeric"})}catch{return"-"}},j=l=>M[l]||l||"-",A=l=>{switch(l){case"APPROVED":return"bg-green-100 text-green-700 border border-green-200";case"REJECTED":return"bg-red-100 text-red-700 border border-red-200";case"PENDING":default:return"bg-amber-100 text-amber-700 border border-amber-200"}},R=async()=>{h.value=!0;try{const l=await w("/driver-verifications/me"),e=l&&typeof l=="object"&&"data"in l?l.data:l;i.value=e||null}catch{i.value=null}finally{h.value=!1}},_=l=>{if(!l)return"-";const e=String(l),a=e.slice(-4);return"•".repeat(Math.max(0,e.length-4))+a},P=S(()=>s.licenseNumber&&s.firstNameOnLicense&&s.lastNameOnLicense&&s.licenseIssueDate&&s.licenseExpiryDate&&s.typeOnLicense&&s.licensePhoto&&s.selfiePhoto),L=l=>{var e,a;l==="licensePhoto"?(e=g.value)==null||e.click():l==="selfiePhoto"&&((a=b.value)==null||a.click())},N=(l,e)=>{var D;const a=(D=l.target.files)==null?void 0:D[0];a&&(e==="licensePhoto"?(s.licensePhoto=a,r.licensePhoto=URL.createObjectURL(a)):e==="selfiePhoto"&&(s.selfiePhoto=a,r.selfiePhoto=URL.createObjectURL(a)))},O=()=>{s.licenseNumber="",s.firstNameOnLicense="",s.lastNameOnLicense="",s.licenseIssueDate="",s.licenseExpiryDate="",s.typeOnLicense="",s.licensePhoto=null,s.selfiePhoto=null,r.licensePhoto="",r.selfiePhoto="",g.value&&(g.value.value=""),b.value&&(b.value.value="")},z=async()=>{var l;if(!P.value){y.warning("ข้อมูลไม่ครบถ้วน","กรุณากรอกข้อมูลและอัปโหลดรูปภาพให้ครบทุกช่อง");return}u.value=!0;try{const e=new FormData;e.append("licenseNumber",s.licenseNumber),e.append("firstNameOnLicense",s.firstNameOnLicense),e.append("lastNameOnLicense",s.lastNameOnLicense),e.append("typeOnLicense",s.typeOnLicense),e.append("licenseIssueDate",new Date(s.licenseIssueDate).toISOString()),e.append("licenseExpiryDate",new Date(s.licenseExpiryDate).toISOString()),s.licensePhoto&&e.append("licensePhotoUrl",s.licensePhoto),s.selfiePhoto&&e.append("selfiePhotoUrl",s.selfiePhoto),await w("/driver-verifications",{method:"POST",body:e}),y.success("ส่งข้อมูลสำเร็จ","คำขอยืนยันตัวตนผู้ขับขี่ของคุณถูกส่งแล้ว"),O()}catch(e){y.error("เกิดข้อผิดพลาด",((l=e.data)==null?void 0:l.message)||"ไม่สามารถส่งข้อมูลได้")}finally{u.value=!1}};return U(()=>{R()}),(l,e)=>(o(),n("div",Y,[t("div",K,[t("div",Q,[H(J),t("main",W,[t("div",X,[t("div",Z,[t("div",ee,[e[11]||(e[11]=t("h2",{class:"text-lg font-semibold text-gray-900"}," ข้อมูลการยืนยันผู้ขับขี่ของฉัน ",-1)),i.value?(o(),n("span",{key:0,class:F(["inline-flex items-center px-3 py-1 text-sm font-medium rounded-full",A(i.value.status)])},f(j(i.value.status)),3)):I("",!0)]),h.value?(o(),n("div",te,"กำลังโหลดข้อมูล...")):i.value?(o(),n("div",se,[t("div",null,[e[12]||(e[12]=t("div",{class:"text-sm text-gray-500"},"ชื่อบนบัตร",-1)),t("div",le,f(i.value.firstNameOnLicense),1)]),t("div",null,[e[13]||(e[13]=t("div",{class:"text-sm text-gray-500"},"นามสกุลบนบัตร",-1)),t("div",ae,f(i.value.lastNameOnLicense),1)]),t("div",null,[e[16]||(e[16]=t("div",{class:"text-sm text-gray-500"},"เลขที่ใบขับขี่",-1)),t("div",ie,[t("span",null,f(p.value?i.value.licenseNumber:_(i.value.licenseNumber)),1),t("button",{type:"button",onClick:e[0]||(e[0]=a=>p.value=!p.value),class:"p-1 ml-2 text-gray-500 rounded hover:text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":p.value?"ซ่อนเลขที่ใบขับขี่":"แสดงเลขที่ใบขับขี่",title:"สลับการแสดงเลขที่ใบขับขี่"},[p.value?(o(),n("svg",re,e[15]||(e[15]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.477 0-8.268-2.943-9.542-7a10.053 10.053 0 012.227-3.592M6.223 6.223A10.05 10.05 0 0112 5c4.477 0 8.268 2.943 9.542 7a10.05 10.05 0 01-2.042 3.33M15 12a3 3 0 00-3-3M3 3l18 18"},null,-1)]))):(o(),n("svg",oe,e[14]||(e[14]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.477 0 8.268 2.943 9.542 7-1.274 4.057-5.065 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)])))],8,ne)])]),t("div",null,[e[17]||(e[17]=t("div",{class:"text-sm text-gray-500"},"ชนิดของบัตรขับขี่",-1)),t("div",de,f(V(i.value.typeOnLicense)),1)]),t("div",null,[e[18]||(e[18]=t("div",{class:"text-sm text-gray-500"},"วันออกใบขับขี่",-1)),t("div",fe,f(k(i.value.licenseIssueDate)),1)]),t("div",null,[e[19]||(e[19]=t("div",{class:"text-sm text-gray-500"},"วันหมดอายุใบขับขี่",-1)),t("div",ce,f(k(i.value.licenseExpiryDate)),1)])])):(o(),n("div",ue," ยังไม่มีประวัติการยืนยันผู้ขับขี่ "))])]),e[36]||(e[36]=d('<div class="mb-8 text-center" data-v-cff9f45f><div class="inline-flex items-center justify-center w-16 h-16 mb-4 bg-blue-600 rounded-full" data-v-cff9f45f><svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-cff9f45f><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" data-v-cff9f45f></path></svg></div><h1 class="mb-2 text-3xl font-bold text-gray-800" data-v-cff9f45f>การยืนยันตัวตนสำหรับผู้ขับขี่</h1><p class="max-w-md mx-auto text-gray-600" data-v-cff9f45f> อัปโหลดภาพบัตรขับขี่ประจำตัวและรูปถ่าย เพื่อยืนยันตัวตนของคุณ </p></div>',1)),t("div",ve,[t("form",{onSubmit:G(z,["prevent"]),novalidate:"",class:"space-y-8"},[t("div",me,[e[22]||(e[22]=d('<div class="flex items-center mb-6" data-v-cff9f45f><div class="mr-4 step-indicator" data-v-cff9f45f>1</div><label class="text-xl font-semibold text-gray-800" data-v-cff9f45f> รูปบัตรขับขี่ประจำตัว (ด้านหน้า) <span class="text-red-500" data-v-cff9f45f>*</span></label></div><h4 class="mb-2 text-sm font-medium text-gray-700" data-v-cff9f45f>ตัวอย่างที่ถูกต้อง:</h4>',2)),t("div",pe,[e[21]||(e[21]=d('<div class="space-y-4" data-v-cff9f45f><div class="relative h-40 p-6 license-card" data-v-cff9f45f><div class="relative z-10 flex flex-col justify-between h-full" data-v-cff9f45f><div class="flex items-start justify-between" data-v-cff9f45f><div data-v-cff9f45f><div class="thai-text" data-v-cff9f45f>ใบอนุญาติขับรถยนต์</div><div class="text-xs font-bold text-blue-800" data-v-cff9f45f>DRIVING LICENSE </div></div></div><div class="flex items-center space-x-3" data-v-cff9f45f><div class="flex items-center justify-center w-12 h-12 bg-blue-300 rounded-md" data-v-cff9f45f><svg class="w-6 h-6 text-blue-700" fill="currentColor" viewBox="0 0 20 20" data-v-cff9f45f><path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd" data-v-cff9f45f></path></svg></div><div data-v-cff9f45f><div class="text-xs font-semibold text-blue-800" data-v-cff9f45f>นาย สมชาย ใจดี </div><div class="text-xs text-blue-700" data-v-cff9f45f>เลขที่ 12345678</div><div class="text-xs text-blue-600" data-v-cff9f45f>หมดอายุ 01/01/2027</div></div></div></div></div><p class="text-xs text-center text-gray-600" data-v-cff9f45f>วางบัตรบนพื้นผิวเรียบ ถ่ายให้ชัดเจน </p></div>',1)),t("div",{onClick:e[2]||(e[2]=a=>L("licensePhoto")),class:"relative flex items-center justify-center h-40 p-8 border-2 border-gray-300 border-dashed rounded-lg upload-zone bg-gray-50 hover:bg-gray-100 hover:border-blue-400"},[r.licensePhoto?(o(),n("img",{key:1,src:r.licensePhoto,class:"object-cover w-full h-full rounded-md"},null,8,ge)):(o(),n("div",xe,e[20]||(e[20]=[d('<svg class="w-12 h-12 mx-auto mb-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-cff9f45f><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z" data-v-cff9f45f></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z" data-v-cff9f45f></path></svg><p class="mb-2 text-lg text-gray-600" data-v-cff9f45f>คลิกเพื่ออัปโหลด</p><p class="text-sm text-gray-500" data-v-cff9f45f>JPG, PNG (ไม่เกิน 10MB)</p>',3)]))),t("input",{type:"file",ref_key:"licensePhotoInput",ref:g,onChange:e[1]||(e[1]=a=>N(a,"licensePhoto")),class:"hidden",accept:"image/png, image/jpeg"},null,544)])])]),t("div",be,[e[25]||(e[25]=d('<div class="flex items-center mb-6" data-v-cff9f45f><div class="mr-4 step-indicator" data-v-cff9f45f>2</div><label class="text-xl font-semibold text-gray-800" data-v-cff9f45f> รูปถ่าย (Selfie) <span class="text-red-500" data-v-cff9f45f>*</span></label></div><h4 class="mb-2 text-sm font-medium text-gray-700" data-v-cff9f45f>ตัวอย่างที่ถูกต้อง:</h4>',2)),t("div",ye,[e[24]||(e[24]=d('<div class="space-y-4" data-v-cff9f45f><div class="relative h-40 p-6 selfie-frame" data-v-cff9f45f><div class="relative z-10 flex items-center justify-center h-full" data-v-cff9f45f><div class="flex items-center space-x-4" data-v-cff9f45f><div class="flex items-center justify-center w-20 h-20 person-silhouette" data-v-cff9f45f><svg class="w-12 h-12 text-gray-200" fill="currentColor" viewBox="0 0 20 20" data-v-cff9f45f><path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd" data-v-cff9f45f></path></svg></div></div></div></div><p class="text-xs text-center text-gray-600" data-v-cff9f45f>ถือบัตรชิดข้างใบหน้า ให้เห็นทั้งสองอย่างชัดเจน</p></div>',1)),t("div",{onClick:e[4]||(e[4]=a=>L("selfiePhoto")),class:"relative flex items-center justify-center h-40 p-8 border-2 border-gray-300 border-dashed rounded-lg upload-zone bg-gray-50 hover:bg-gray-100 hover:border-blue-400"},[r.selfiePhoto?(o(),n("img",{key:1,src:r.selfiePhoto,class:"object-cover w-full h-full rounded-md"},null,8,we)):(o(),n("div",he,e[23]||(e[23]=[d('<svg class="w-12 h-12 mx-auto mb-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-cff9f45f><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z" data-v-cff9f45f></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z" data-v-cff9f45f></path></svg><p class="mb-2 text-lg text-gray-600" data-v-cff9f45f>คลิกเพื่ออัปโหลด</p><p class="text-sm text-gray-500" data-v-cff9f45f>JPG, PNG (ไม่เกิน 10MB)</p>',3)]))),t("input",{type:"file",ref_key:"selfiePhotoInput",ref:b,onChange:e[3]||(e[3]=a=>N(a,"selfiePhoto")),class:"hidden",accept:"image/png, image/jpeg"},null,544)])])]),t("div",ke,[e[33]||(e[33]=t("div",{class:"flex items-center mb-4"},[t("div",{class:"mr-4 step-indicator"},"3"),t("h2",{class:"text-xl font-semibold text-gray-800"},"ข้อมูลในบัตรขับขี่ประจำตัว")],-1)),t("div",Pe,[t("div",null,[e[26]||(e[26]=t("label",{for:"firstNameOnLicense",class:"block mb-2 text-sm font-medium text-gray-700"},[c("ชื่อ (บนบัตร) "),t("span",{class:"text-red-500"},"*")],-1)),m(t("input",{"onUpdate:modelValue":e[5]||(e[5]=a=>s.firstNameOnLicense=a),id:"firstNameOnLicense",type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:""},null,512),[[x,s.firstNameOnLicense]])]),t("div",null,[e[27]||(e[27]=t("label",{for:"lastNameOnLicense",class:"block mb-2 text-sm font-medium text-gray-700"},[c("นามสกุล (บนบัตร) "),t("span",{class:"text-red-500"},"*")],-1)),m(t("input",{"onUpdate:modelValue":e[6]||(e[6]=a=>s.lastNameOnLicense=a),id:"lastNameOnLicense",type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:""},null,512),[[x,s.lastNameOnLicense]])]),t("div",null,[e[28]||(e[28]=t("label",{for:"licenseNumber",class:"block mb-2 text-sm font-medium text-gray-700"},[c("เลขที่ใบขับขี่ "),t("span",{class:"text-red-500"},"*")],-1)),m(t("input",{"onUpdate:modelValue":e[7]||(e[7]=a=>s.licenseNumber=a),id:"licenseNumber",type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:""},null,512),[[x,s.licenseNumber]])]),t("div",null,[e[30]||(e[30]=t("label",{for:"typeOnLicense",class:"block mb-2 text-sm font-medium text-gray-700"},[c("ชนิดของบัตรขับขี่ "),t("span",{class:"text-red-500"},"*")],-1)),m(t("select",{"onUpdate:modelValue":e[8]||(e[8]=a=>s.typeOnLicense=a),id:"typeOnLicense",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:""},e[29]||(e[29]=[d('<option disabled value="" data-v-cff9f45f>กรุณาเลือกชนิดของบัตร</option><option value="PRIVATE_CAR_TEMPORARY" data-v-cff9f45f>รถยนต์ส่วนบุคคลชั่วคราว (2 ปี) </option><option value="PRIVATE_CAR" data-v-cff9f45f>รถยนต์ส่วนบุคคล (5 ปี)</option><option value="PUBLIC_CAR" data-v-cff9f45f>รถยนต์สาธารณะ</option><option value="LIFETIME" data-v-cff9f45f>ตลอดชีพ</option>',5)]),512),[[q,s.typeOnLicense]])]),t("div",null,[e[31]||(e[31]=t("label",{for:"licenseIssueDate",class:"block mb-2 text-sm font-medium text-gray-700"},[c("วันออกใบขับขี่ "),t("span",{class:"text-red-500"},"*")],-1)),m(t("input",{"onUpdate:modelValue":e[9]||(e[9]=a=>s.licenseIssueDate=a),id:"licenseIssueDate",type:"date",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:""},null,512),[[x,s.licenseIssueDate]])]),t("div",null,[e[32]||(e[32]=t("label",{for:"licenseExpiryDate",class:"block mb-2 text-sm font-medium text-gray-700"},[c("วันหมดอายุใบขับขี่ "),t("span",{class:"text-red-500"},"*")],-1)),m(t("input",{"onUpdate:modelValue":e[10]||(e[10]=a=>s.licenseExpiryDate=a),id:"licenseExpiryDate",type:"date",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:""},null,512),[[x,s.licenseExpiryDate]])])])]),e[35]||(e[35]=t("p",{class:"mt-4 text-sm text-center text-gray-500"}," ข้อมูลของคุณจะได้รับการตรวจสอบโดยเจ้าหน้าที่ระบบโดยเร็วที่สุด ",-1)),t("div",Le,[t("button",{type:"button",onClick:O,disabled:u.value,class:"px-6 py-3 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-400 disabled:opacity-50"}," ยกเลิก ",8,Ne),t("button",{type:"submit",disabled:!P.value||u.value,class:"flex items-center px-6 py-3 font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-blue-400 disabled:cursor-not-allowed"},[u.value?(o(),n("svg",De,e[34]||(e[34]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):I("",!0),c(" "+f(u.value?"กำลังส่งข้อมูล...":"ส่งคำขอยืนยันตัวตน"),1)],8,Oe)])],32)])])])])]))}},je=B(Ee,[["__scopeId","data-v-cff9f45f"]]);export{je as default};

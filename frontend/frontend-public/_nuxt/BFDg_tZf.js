import{_ as $e,m as Ae,r as w,x as ce,y as Te,i as Ee,p as Pe,c as i,a as o,b as Le,F as A,q as P,g as v,t as c,s as Oe,o as r,n as ue,d as N,f as L}from"./DPSIKoxe.js";import{d as H}from"./B5yDJBm8.js";import{b as Fe}from"./C5FTVxxA.js";import{C as Re}from"./CL2Ezi0q.js";import{s as je}from"./x_rD_Ya3.js";import{u as Be}from"./BaxiziUg.js";import"./Cpj98o6Y.js";const De={class:"px-4 py-8 mx-auto max-w-7xl sm:px-6 lg:px-8"},Se={class:"p-6 mb-8 bg-white border border-gray-300 rounded-lg shadow-md"},Ve={class:"flex flex-wrap gap-2"},He=["onClick"],Ie={class:"grid grid-cols-1 gap-6 lg:grid-cols-3"},ze={class:"lg:col-span-2"},Ue={class:"bg-white border border-gray-300 rounded-lg shadow-md"},Ge={key:0,class:"p-12 text-center text-gray-500"},We={key:1,class:"divide-y divide-gray-200"},qe={key:0,class:"p-12 text-center text-gray-500"},Ke=["onClick"],Je={class:"flex items-start justify-between mb-4"},Ye={class:"flex-1"},Qe={class:"flex items-center justify-between"},Xe={class:"text-lg font-semibold text-gray-900"},Ze={key:0,class:"status-badge status-pending"},et={key:1,class:"status-badge status-confirmed"},tt={key:2,class:"status-badge status-rejected"},st={key:3,class:"status-badge status-cancelled"},ot={class:"mt-1 text-sm text-gray-600"},nt={class:"text-sm text-gray-600"},at={key:0,class:"p-2 mt-2 border border-gray-200 rounded-md bg-gray-50"},lt={class:"text-sm text-gray-700"},it={class:"font-medium"},rt={class:"flex items-center mb-4 space-x-4"},dt=["src","alt"],ct={class:"flex-1"},ut={class:"flex items-center"},mt={class:"font-medium text-gray-900"},gt={key:0,class:"relative group ml-1.5 flex items-center"},ft={class:"flex"},pt={key:0,class:"text-xs text-gray-500 mt-0.5"},vt=["href"],yt=["onClick"],ht={class:"flex items-center mt-1"},_t={class:"flex text-sm text-yellow-400"},xt={class:"ml-2 text-sm text-gray-600"},bt={class:"text-right"},kt={class:"text-lg font-bold text-blue-600"},wt={class:"text-sm text-gray-600"},Ct={key:0,class:"pt-4 mt-4 mb-5 duration-300 border-t border-gray-300 animate-in slide-in-from-top"},Mt={class:"grid grid-cols-1 gap-4 md:grid-cols-2"},Nt={class:"space-y-1 text-sm text-gray-600"},$t={class:"font-medium text-gray-900"},At={key:0},Tt={class:"mt-2 text-gray-700"},Et={class:"mt-1"},Pt={class:"font-medium text-gray-900"},Lt={key:0},Ot={class:"space-y-1 text-sm text-gray-600"},Ft={class:"mt-4 space-y-4"},Rt={key:0},jt={class:"p-3 text-sm text-gray-700 border border-gray-300 rounded-md bg-gray-50"},Bt={key:1},Dt={class:"grid grid-cols-3 gap-2 mt-2"},St=["src"],Vt=["onClick"],Ht=["onClick"],It={key:1,class:"px-4 py-2 text-sm text-white transition duration-200 bg-blue-600 rounded-md hover:bg-blue-700"},zt=["onClick"],Ut={class:"lg:col-span-1"},Gt={class:"sticky overflow-hidden bg-white border border-gray-300 rounded-lg shadow-md top-8"},Wt={class:"p-3 border-gray-300"},qt={class:"mt-1 text-sm text-gray-600"},ee="__gmapsReady__",Kt={__name:"index_v4",setup(Jt){var ae;H.locale("th"),H.extend(Fe);const{$api:O}=Ae(),{toast:$}=Oe(),T=w("pending"),E=w(null),I=w(!1),z=w(null),p=w([]);let x=null,F=null,R=null,j=null,U=null,G=null;const W=w(!1);let B=[];const me=[{status:"pending",label:"รอดำเนินการ"},{status:"confirmed",label:"ยืนยันแล้ว"},{status:"rejected",label:"ปฏิเสธ"},{status:"cancelled",label:"ยกเลิก"},{status:"all",label:"ทั้งหมด"}];function q(s){return(s||"").replace(/,?\s*(Thailand|ไทย|ประเทศ)\s*$/i,"").replace(/\s{2,}/g," ").trim()}const ge={CHANGE_OF_PLAN:"เปลี่ยนแผน/มีธุระกะทันหัน",FOUND_ALTERNATIVE:"พบวิธีเดินทางอื่นแล้ว",DRIVER_DELAY:"คนขับล่าช้าหรือเลื่อนเวลา",PRICE_ISSUE:"ราคาหรือค่าใช้จ่ายไม่เหมาะสม",WRONG_LOCATION:"เลือกจุดรับ–ส่งผิด",DUPLICATE_OR_WRONG_DATE:"จองซ้ำหรือจองผิดวัน",SAFETY_CONCERN:"กังวลด้านความปลอดภัย",WEATHER_OR_FORCE_MAJEURE:"สภาพอากาศ/เหตุสุดวิสัย",COMMUNICATION_ISSUE:"สื่อสารไม่สะดวก/ติดต่อไม่ได้"};function fe(s){return ge[s]||s}const C=ce(()=>T.value==="all"?p.value:p.value.filter(s=>s.status===T.value)),K=ce(()=>p.value.find(s=>s.id===E.value)||null);async function J(){var s,t,e,n,d,y,u,m,h;I.value=!0;try{const b=await O("/routes/me"),le=[];for(const l of b){const k=[];l.vehicle?(k.push(`${l.vehicle.vehicleModel} (${l.vehicle.vehicleType})`),Array.isArray(l.vehicle.amenities)&&l.vehicle.amenities.length>0&&k.push(...l.vehicle.amenities)):k.push("ไม่มีข้อมูลรถ");const g=l.startLocation,f=l.endLocation,V=[[g.lat,g.lng],[f.lat,f.lng]],_=l.waypoints||{},Z=Array.isArray(_.used)&&_.used.length?_.used:Array.isArray(_.requested)?_.requested:[],ie=Array.isArray(_.optimizedOrder)&&_.optimizedOrder.length===Z.length?_.optimizedOrder.map(a=>Z[a]):Z,we=ie.map(a=>{const Me=(a==null?void 0:a.name)||"",re=q((a==null?void 0:a.address)||""),Ne=(a==null?void 0:a.lat)!=null&&(a==null?void 0:a.lng)!=null?`(${a.lat.toFixed(6)}, ${a.lng.toFixed(6)})`:"",de=Me||Ne;return re?`${de} — ${re}`:de}).filter(Boolean),Ce=ie.map(a=>a&&typeof a.lat=="number"&&typeof a.lng=="number"?{lat:a.lat,lng:a.lng,name:a.name||"",address:a.address||""}:null).filter(Boolean);for(const a of l.bookings||[])le.push({id:a.id,status:(a.status||"").toLowerCase(),origin:(g==null?void 0:g.name)||`(${Number(g.lat).toFixed(2)}, ${Number(g.lng).toFixed(2)})`,destination:(f==null?void 0:f.name)||`(${Number(f.lat).toFixed(2)}, ${Number(f.lng).toFixed(2)})`,originHasName:!!(g!=null&&g.name),destinationHasName:!!(f!=null&&f.name),pickupPoint:((s=a.pickupLocation)==null?void 0:s.name)||"-",date:H(l.departureTime).format("D MMMM BBBB"),time:H(l.departureTime).format("HH:mm น."),price:(l.pricePerSeat||0)*(a.numberOfSeats||0),seats:a.numberOfSeats||0,passenger:{name:`${((t=a.passenger)==null?void 0:t.firstName)||""} ${((e=a.passenger)==null?void 0:e.lastName)||""}`.trim()||"ผู้โดยสาร",image:((n=a.passenger)==null?void 0:n.profilePicture)||`https://ui-avatars.com/api/?name=${encodeURIComponent(((d=a.passenger)==null?void 0:d.firstName)||"P")}&background=random&size=64`,email:((y=a.passenger)==null?void 0:y.email)||"",isVerified:!!((u=a.passenger)!=null&&u.isVerified),rating:4.5,reviews:Math.floor(Math.random()*50)+5},coords:V,polyline:l.routePolyline||null,stops:we,stopsCoords:Ce,cancelReason:a.cancelReason||null,carDetails:k,conditions:l.conditions,photos:((m=l.vehicle)==null?void 0:m.photos)||[],originAddress:g!=null&&g.address?q(g.address):null,destinationAddress:f!=null&&f.address?q(f.address):null,durationText:(typeof l.duration=="string"?be(l.duration):l.duration)||(l.durationSeconds?`${Math.round(l.durationSeconds/60)} นาที`:"-"),distanceText:(typeof l.distance=="string"?xe(l.distance):l.distance)||(l.distanceMeters?`${(l.distanceMeters/1e3).toFixed(1)} กม.`:"-")})}p.value=le,await te();const ke=p.value.map(async(l,k)=>{const[g,f]=await Promise.all([se(l.coords[0][0],l.coords[0][1]),se(l.coords[1][0],l.coords[1][1])]),V=await oe(g),_=await oe(f);!p.value[k].originHasName&&V.name&&(p.value[k].origin=V.name),!p.value[k].destinationHasName&&_.name&&(p.value[k].destination=_.name)});await Promise.allSettled(ke)}catch(b){console.error("Failed to fetch routes:",b),p.value=[],$.error("เกิดข้อผิดพลาด",((h=b==null?void 0:b.data)==null?void 0:h.message)||"ไม่สามารถโหลดข้อมูลได้")}finally{I.value=!1}}const pe=s=>s==="all"?p.value.length:p.value.filter(t=>t.status===s).length,ve=s=>{const t=p.value.find(e=>e.id===s);t&&D(t),E.value=E.value===s?null:s};function te(){return new Promise(s=>{if(W.value)return s(!0);const t=je(()=>{W.value&&(clearInterval(t),s(!0))},50)})}function se(s,t){return new Promise(e=>{if(!U)return e(null);U.geocode({location:{lat:s,lng:t}},(n,d)=>{if(d!=="OK"||!(n!=null&&n.length))return e(null);e(n[0])})})}async function oe(s){var y,u;if(!s)return{name:null,area:null};const t=s.address_components||[],e=s.types||[],n=e.includes("point_of_interest")||e.includes("establishment")||e.includes("premise");let d=null;if(n&&s.place_id){const m=await ye(s.place_id);m&&(d=m)}if(!d){const m=(y=t.find(b=>b.types.includes("street_number")))==null?void 0:y.long_name,h=(u=t.find(b=>b.types.includes("route")))==null?void 0:u.long_name;d=m&&h?`${m} ${h}`:h||s.formatted_address||null}return d&&(d=d.replace(/,?\s*(Thailand|ไทย)\s*$/i,"")),{name:d}}function ye(s){return new Promise(t=>{if(!G||!s)return t(null);G.getDetails({placeId:s,fields:["name"]},(e,n)=>{n===google.maps.places.PlacesServiceStatus.OK&&(e!=null&&e.name)?t(e.name):t(null)})})}async function D(s){var n,d,y;if(!s||(await te(),!x))return;F&&(F.setMap(null),F=null),R&&(R.setMap(null),R=null),j&&(j.setMap(null),j=null),B.length&&(B.forEach(u=>u.setMap(null)),B=[]);const t={lat:Number(s.coords[0][0]),lng:Number(s.coords[0][1])},e={lat:Number(s.coords[1][0]),lng:Number(s.coords[1][1])};if(R=new google.maps.Marker({position:t,map:x,label:"A"}),j=new google.maps.Marker({position:e,map:x,label:"B"}),Array.isArray(s.stopsCoords)&&s.stopsCoords.length&&(B=s.stopsCoords.map((u,m)=>new google.maps.Marker({position:{lat:u.lat,lng:u.lng},map:x,icon:"http://maps.google.com/mapfiles/ms/icons/green-dot.png",title:u.name||u.address||`จุดแวะ ${m+1}`}))),s.polyline&&((n=google.maps.geometry)!=null&&n.encoding)){const u=google.maps.geometry.encoding.decodePath(s.polyline);F=new google.maps.Polyline({path:u,map:x,strokeColor:"#2563eb",strokeOpacity:.9,strokeWeight:5});const m=new google.maps.LatLngBounds;u.forEach(h=>m.extend(h)),(d=s.stopsCoords)!=null&&d.length&&s.stopsCoords.forEach(h=>m.extend(new google.maps.LatLng(h.lat,h.lng))),x.fitBounds(m)}else{const u=new google.maps.LatLngBounds;u.extend(t),u.extend(e),(y=s.stopsCoords)!=null&&y.length&&s.stopsCoords.forEach(m=>u.extend(new google.maps.LatLng(m.lat,m.lng))),x.fitBounds(u)}}const Y=w(!1),S=w(null),M=w({title:"",message:"",confirmText:"",action:null,variant:"danger"}),Q=(s,t)=>{S.value=s,t==="confirm"?M.value={title:"ยืนยันคำขอจอง",message:`ยืนยันคำขอของผู้โดยสาร "${s.passenger.name}" ใช่หรือไม่?`,confirmText:"ยืนยันคำขอ",action:"confirm",variant:"primary"}:t==="reject"?M.value={title:"ปฏิเสธคำขอจอง",message:`ต้องการปฏิเสธคำขอของ "${s.passenger.name}" ใช่หรือไม่?`,confirmText:"ปฏิเสธ",action:"reject",variant:"danger"}:t==="delete"&&(M.value={title:"ยืนยันการลบรายการ",message:"ต้องการลบคำขอนี้ออกจากรายการใช่หรือไม่?",confirmText:"ลบรายการ",action:"delete",variant:"danger"}),Y.value=!0},X=()=>{Y.value=!1,S.value=null},he=async()=>{var e;if(!S.value)return;const s=M.value.action,t=S.value.id;try{s==="confirm"?(await O(`/bookings/${t}/status`,{method:"PATCH",body:{status:"CONFIRMED"}}),$.success("สำเร็จ","ยืนยันคำขอแล้ว")):s==="reject"?(await O(`/bookings/${t}/status`,{method:"PATCH",body:{status:"REJECTED"}}),$.success("สำเร็จ","ปฏิเสธคำขอแล้ว")):s==="delete"&&(await O(`/bookings/${t}`,{method:"DELETE"}),$.success("ลบรายการสำเร็จ","ลบคำขอออกจากรายการแล้ว")),X(),await J()}catch(n){console.error(`Failed to ${s} booking:`,n),$.error("เกิดข้อผิดพลาด",((e=n==null?void 0:n.data)==null?void 0:e.message)||"ไม่สามารถดำเนินการได้"),X()}},_e=async s=>{try{await navigator.clipboard.writeText(s),$.success("คัดลอกแล้ว",s)}catch{$.error("คัดลอกไม่สำเร็จ","ลองใหม่อีกครั้ง")}};function xe(s){if(typeof s!="string")return s;const t=s.split("+");if(t.length<=1)return s;let e=0;for(const n of t){const d=parseFloat(n.replace(/[^\d.]/g,""));Number.isNaN(d)||(/กม/.test(n)?e+=d*1e3:(/เมตร|ม\./.test(n),e+=d))}if(e>=1e3){const n=Math.round(e/1e3*10)/10;return`${n%1===0?n.toFixed(0):n} กม.`}return`${Math.round(e)} ม.`}function be(s){if(typeof s!="string")return s;const t=s.split("+");if(t.length<=1)return s;let e=0;for(const y of t){const u=parseFloat(y.replace(/[^\d.]/g,""));Number.isNaN(u)||(/ชม/.test(y)?e+=u*60:e+=u)}const n=Math.floor(e/60),d=Math.round(e%60);return n?d?`${n} ชม. ${d} นาที`:`${n} ชม.`:`${d} นาที`}Be({script:(ae=window.google)!=null&&ae.maps?[]:[{key:"gmaps",src:`https://maps.googleapis.com/maps/api/js?key=${Te().public.googleMapsApiKey}&libraries=places,geometry&callback=${ee}`,async:!0,defer:!0}]}),Ee(()=>{var s;if((s=window.google)!=null&&s.maps){ne(),J().then(()=>{C.value.length&&D(C.value[0])});return}window[ee]=()=>{try{delete window[ee]}catch{}ne(),J().then(()=>{C.value.length&&D(C.value[0])})}});function ne(){!z.value||x||(x=new google.maps.Map(z.value,{center:{lat:13.7563,lng:100.5018},zoom:6,mapTypeControl:!1,streetViewControl:!1,fullscreenControl:!0}),U=new google.maps.Geocoder,G=new google.maps.places.PlacesService(x),W.value=!0)}return Pe(T,()=>{E.value=null,C.value.length>0&&D(C.value[0])}),(s,t)=>(r(),i("div",null,[o("div",De,[t[18]||(t[18]=o("div",{class:"mb-8"},[o("h2",{class:"text-2xl font-bold text-gray-900"},"คำขอจองเส้นทางของฉัน"),o("p",{class:"mt-2 text-gray-600"},"ดูและจัดการคำขอจองจากผู้โดยสารในเส้นทางที่คุณสร้าง")],-1)),o("div",Se,[o("div",Ve,[(r(),i(A,null,P(me,e=>o("button",{key:e.status,onClick:n=>T.value=e.status,class:ue(["tab-button px-4 py-2 rounded-md font-medium",{active:T.value===e.status}])},c(e.label)+" ("+c(pe(e.status))+") ",11,He)),64))])]),o("div",Ie,[o("div",ze,[o("div",Ue,[t[16]||(t[16]=o("div",{class:"p-6 border-b border-gray-300"},[o("h3",{class:"text-lg font-semibold text-gray-900"},"รายการคำขอจอง")],-1)),I.value?(r(),i("div",Ge,t[1]||(t[1]=[o("p",null,"กำลังโหลดข้อมูล...",-1)]))):(r(),i("div",We,[C.value.length===0?(r(),i("div",qe,t[2]||(t[2]=[o("p",null,"ไม่พบรายการในหมวดหมู่นี้",-1)]))):v("",!0),(r(!0),i(A,null,P(C.value,e=>(r(),i("div",{key:e.id,class:"p-6 transition-colors duration-200 cursor-pointer trip-card hover:bg-gray-50",onClick:n=>ve(e.id)},[o("div",Je,[o("div",Ye,[o("div",Qe,[o("h4",Xe,c(e.origin)+" → "+c(e.destination),1),e.status==="pending"?(r(),i("span",Ze,"รอดำเนินการ")):e.status==="confirmed"?(r(),i("span",et,"ยืนยันแล้ว")):e.status==="rejected"?(r(),i("span",tt,"ปฏิเสธ")):e.status==="cancelled"?(r(),i("span",st,"ยกเลิก")):v("",!0)]),o("p",ot,"จุดนัดพบ: "+c(e.pickupPoint),1),o("p",nt,[N(" วันที่: "+c(e.date)+" ",1),t[3]||(t[3]=o("span",{class:"mx-2 text-gray-300"},"|",-1)),N(" เวลา: "+c(e.time)+" ",1),t[4]||(t[4]=o("span",{class:"mx-2 text-gray-300"},"|",-1)),N(" ระยะเวลา: "+c(e.durationText)+" ",1),t[5]||(t[5]=o("span",{class:"mx-2 text-gray-300"},"|",-1)),N(" ระยะทาง: "+c(e.distanceText),1)]),T.value==="cancelled"&&e.status==="cancelled"&&e.cancelReason?(r(),i("div",at,[o("span",lt,[t[6]||(t[6]=N(" เหตุผลการยกเลิกของผู้โดยสาร: ")),o("span",it,c(fe(e.cancelReason)),1)])])):v("",!0)])]),o("div",rt,[o("img",{src:e.passenger.image,alt:e.passenger.name,class:"object-cover rounded-full w-15 h-15"},null,8,dt),o("div",ct,[o("div",ut,[o("h5",mt,c(e.passenger.name),1),e.passenger.isVerified?(r(),i("div",gt,t[7]||(t[7]=[o("svg",{class:"w-5 h-5 text-blue-600",viewBox:"0 0 24 24",fill:"currentColor"},[o("path",{"fill-rule":"evenodd",d:"M8.603 3.799A4.49 4.49 0 0112 2.25c1.357 0 2.573.6 3.397 1.549a4.49 4.49 0 013.498 1.307 4.491 4.491 0 011.307 3.497A4.49 4.49 0 0121.75 12c0 1.357-.6 2.573-1.549 3.397a4.49 4.49 0 01-1.307 3.498 4.491 4.491 0 01-3.497 1.307A4.49 4.49 0 0112 21.75a4.49 4.49 0 01-3.397-1.549 4.49 4.49 0 01-3.498-1.306 4.491 4.491 0 01-1.307-3.498A4.49 4.49 0 012.25 12c0-1.357.6-2.573 1.549-3.397a4.49 4.49 0 011.307-3.497 4.49 4.49 0 013.497-1.307zm7.007 6.387a.75.75 0 10-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 00-1.06 1.06l2.25 2.25a.75.75 0 001.07-.01l3.5-4.875z","clip-rule":"evenodd"})],-1),o("span",{class:"absolute px-2 py-1 mb-2 text-xs text-white transition-opacity -translate-x-1/2 bg-gray-800 rounded-md opacity-0 pointer-events-none bottom-full left-1/2 w-max group-hover:opacity-100"}," ผู้โดยสารยืนยันตัวตนแล้ว ",-1)]))):v("",!0)]),o("div",ft,[e.passenger.email?(r(),i("p",pt,[t[8]||(t[8]=N(" อีเมล: ")),o("a",{href:`mailto:${e.passenger.email}`,class:"text-blue-600 hover:underline",onClick:t[0]||(t[0]=L(()=>{},["stop"]))},c(e.passenger.email),9,vt)])):v("",!0),e.passenger.email?(r(),i("button",{key:1,class:"inline-flex items-center ml-1 text-gray-500 rounded hover:text-gray-700 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500",title:"คัดลอกอีเมล","aria-label":"คัดลอกอีเมล",onClick:L(n=>_e(e.passenger.email),["stop"])},t[9]||(t[9]=[o("svg",{class:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7h8a2 2 0 012 2v8a2 2 0 01-2 2H8a2 2 0 01-2-2V9a2 2 0 012-2z"}),o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7V5a2 2 0 00-2-2H8a2 2 0 00-2 2v2"})],-1)]),8,yt)):v("",!0)]),o("div",ht,[o("div",_t,[o("span",null,c("★".repeat(Math.round(e.passenger.rating)))+c("☆".repeat(5-Math.round(e.passenger.rating))),1)]),o("span",xt,c(e.passenger.rating)+" ("+c(e.passenger.reviews)+" รีวิว) ",1)])]),o("div",bt,[o("div",kt,c(e.price)+" บาท",1),o("div",wt,"จำนวน "+c(e.seats)+" ที่นั่ง",1)])]),E.value===e.id?(r(),i("div",Ct,[o("div",Mt,[o("div",null,[t[12]||(t[12]=o("h5",{class:"mb-2 font-medium text-gray-900"},"รายละเอียดเส้นทาง",-1)),o("ul",Nt,[o("li",null,[t[10]||(t[10]=N(" • จุดเริ่มต้น: ")),o("span",$t,c(e.origin),1),e.originAddress?(r(),i("span",At," — "+c(e.originAddress),1)):v("",!0)]),e.stops&&e.stops.length?(r(),i(A,{key:0},[o("li",Tt,"• จุดแวะระหว่างทาง ("+c(e.stops.length)+" จุด):",1),(r(!0),i(A,null,P(e.stops,(n,d)=>(r(),i("li",{key:d},"  - จุดแวะ "+c(d+1)+": "+c(n),1))),128))],64)):v("",!0),o("li",Et,[t[11]||(t[11]=N(" • จุดปลายทาง: ")),o("span",Pt,c(e.destination),1),e.destinationAddress?(r(),i("span",Lt," — "+c(e.destinationAddress),1)):v("",!0)])])]),o("div",null,[t[13]||(t[13]=o("h5",{class:"mb-2 font-medium text-gray-900"},"รายละเอียดรถ",-1)),o("ul",Ot,[(r(!0),i(A,null,P(e.carDetails,n=>(r(),i("li",{key:n},"• "+c(n),1))),128))])])]),o("div",Ft,[e.conditions?(r(),i("div",Rt,[t[14]||(t[14]=o("h5",{class:"mb-2 font-medium text-gray-900"},"เงื่อนไขการเดินทาง",-1)),o("p",jt,c(e.conditions),1)])):v("",!0),e.photos&&e.photos.length>0?(r(),i("div",Bt,[t[15]||(t[15]=o("h5",{class:"mb-2 font-medium text-gray-900"},"รูปภาพรถยนต์",-1)),o("div",Dt,[(r(!0),i(A,null,P(e.photos.slice(0,3),(n,d)=>(r(),i("div",{key:d},[o("img",{src:n,alt:"Vehicle photo",class:"object-cover w-full transition-opacity rounded-lg shadow-sm cursor-pointer aspect-video hover:opacity-90"},null,8,St)]))),128))])])):v("",!0)])])):v("",!0),o("div",{class:ue(["flex justify-end space-x-3",{"mt-4":E.value!==e.id}])},[e.status==="pending"?(r(),i(A,{key:0},[o("button",{onClick:L(n=>Q(e,"confirm"),["stop"]),class:"px-4 py-2 text-sm text-white transition duration-200 bg-blue-600 rounded-md hover:bg-blue-700"}," ยืนยันคำขอ ",8,Vt),o("button",{onClick:L(n=>Q(e,"reject"),["stop"]),class:"px-4 py-2 text-sm text-red-600 transition duration-200 border border-red-300 rounded-md hover:bg-red-50"}," ปฏิเสธ ",8,Ht)],64)):e.status==="confirmed"?(r(),i("button",It," แชทกับผู้โดยสาร ")):["rejected","cancelled"].includes(e.status)?(r(),i("button",{key:2,onClick:L(n=>Q(e,"delete"),["stop"]),class:"px-4 py-2 text-sm text-gray-600 transition duration-200 border border-gray-300 rounded-md hover:bg-gray-50"}," ลบรายการ ",8,zt)):v("",!0)],2)],8,Ke))),128))]))])]),o("div",Ut,[o("div",Gt,[o("div",Wt,[t[17]||(t[17]=o("h3",{class:"text-lg font-semibold text-gray-900"},"แผนที่เส้นทาง",-1)),o("p",qt,c(K.value?K.value.origin+" → "+K.value.destination:"คลิกที่รายการเพื่อดูเส้นทาง"),1)]),o("div",{ref_key:"mapContainer",ref:z,id:"map"},null,512)])])])]),Le(Re,{show:Y.value,title:M.value.title,message:M.value.message,confirmText:M.value.confirmText,variant:M.value.variant,onConfirm:he,onCancel:X},null,8,["show","title","message","confirmText","variant"])]))}},os=$e(Kt,[["__scopeId","data-v-6b6b6efe"]]);export{os as default};

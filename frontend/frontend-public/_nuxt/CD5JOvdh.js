import{_ as Ge}from"./Lcixqshc.js";import{_ as Oe,J as We,r as a,A as ae,x as ke,i as Ke,H as Qe,c as d,b as q,a as t,w as Le,h as b,g as m,d as f,v as x,F as ie,q as re,t as u,T as Je,y as Xe,B as Ce,C as Ie,s as Ye,o as c,f as Ze}from"./DPSIKoxe.js";import{u as et}from"./BaxiziUg.js";import{A as tt,_ as lt}from"./CaCOxDSn.js";import"./DOK8vhV6.js";const st={id:"main-content",class:"main-content mt-16 ml-0 lg:ml-[280px] p-6 min-h-screen"},ot={class:"mx-auto max-w-7xl"},nt={class:"mb-8"},at={class:"flex w-full overflow-hidden bg-white border border-gray-300 rounded-lg shadow-lg"},it={class:"flex-1 p-8 space-y-8"},rt={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},dt={class:"relative"},ut={key:0,class:"absolute z-20 w-full mt-1 overflow-auto bg-white border rounded-md shadow max-h-60"},ct=["onClick"],pt={class:"text-sm font-medium text-gray-800"},mt={key:0,class:"text-xs text-gray-500"},gt={class:"text-xs text-gray-500"},ft={key:0,class:"px-3 py-2 text-sm text-gray-500"},vt={key:1,class:"mt-2 text-xs text-amber-600"},yt={class:"relative"},bt=["disabled"],xt={key:0,class:"absolute z-20 w-full mt-1 overflow-auto bg-white border rounded-md shadow max-h-60"},wt=["onClick"],ht={class:"text-sm font-medium text-gray-800"},_t={class:"text-xs text-gray-500"},kt={class:"text-xs text-gray-500"},Lt={key:0,class:"px-3 py-2 text-sm text-gray-500"},Ct={key:1,class:"mt-2 text-xs text-amber-600"},It={class:"overflow-hidden border border-gray-300 rounded-lg"},St={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},zt={class:"relative"},Mt={key:0,class:"mt-1 text-xs text-gray-500 truncate"},Bt={class:"relative"},$t={key:0,class:"mt-1 text-xs text-gray-500 truncate"},At={class:"space-y-3"},Pt={class:"relative"},Tt=["onUpdate:modelValue"],Vt=["onClick"],Et={key:0,class:"mt-1 text-xs text-gray-500 truncate"},Ut={class:"flex items-center gap-2"},Nt=["onClick"],Ht={class:"grid grid-cols-1 gap-4 sm:grid-cols-3"},Rt={class:"flex justify-end gap-4 pt-2"},jt=["disabled"],Dt=["disabled"],Ft={key:0,class:"w-5 h-5 mr-3 -ml-1 text-white animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},qt={class:"bg-white rounded-lg w-[95%] max-w-3xl overflow-hidden"},Gt={class:"flex items-center justify-between p-4 border-b border-gray-200"},Ot={class:"text-lg font-semibold text-gray-900"},Wt={class:"p-0"},Kt={class:"flex items-center justify-between p-4 border-t border-gray-200"},Qt={class:"text-sm text-gray-700 truncate"},Jt={class:"truncate"},Xt=["disabled"],de="__gmapsReadyAdminCreateRoute__",Yt={__name:"create",setup(Zt){var xe;et({});const{toast:G}=Ye(),T=Xe(),h=((xe=We("token"))==null?void 0:xe.value)||localStorage.getItem("token"),_=a(""),w=a([]),V=a(!1),ue=a(""),s=ae({driverId:"",vehicleId:"",startLocation:{lat:null,lng:null,name:"",address:""},endLocation:{lat:null,lng:null,name:"",address:""},waypoints:[],departureTime:"",availableSeats:1,pricePerSeat:0,conditions:""}),Se=ke(()=>_.value&&(V.value||w.value.length>0));let ce=null;async function ze(){_.value!==ue.value&&(s.driverId=""),clearTimeout(ce);const l=_.value.trim();if(!l){w.value=[];return}ce=setTimeout(async()=>{try{V.value=!0;const e=await $fetch("/users/admin",{baseURL:T.public.apiBase,headers:{Accept:"application/json",...h?{Authorization:`Bearer ${h}`}:{}},query:{q:l,page:1,limit:10}});w.value=(e==null?void 0:e.data)||[]}catch{w.value=[]}finally{V.value=!1}},300)}function Me(l){s.driverId=l.id;const e=`${l.firstName||""} ${l.lastName||""} (@${l.username||""})`.trim();_.value=e,ue.value=e,w.value=[],Be(l.id)}const S=a(""),O=a(!1),W=a(!1),E=a([]),z=a([]);async function Be(l){if(l)try{W.value=!0;const e=await $fetch(`/vehicles/admin/user/${l}`,{baseURL:T.public.apiBase,headers:{Accept:"application/json",...h?{Authorization:`Bearer ${h}`}:{}}});E.value=(e==null?void 0:e.data)||e||[],z.value=E.value,S.value="",s.vehicleId=""}catch{E.value=[],z.value=[],s.vehicleId=""}finally{W.value=!1}}function $e(){const l=S.value.trim().toLowerCase();z.value=E.value.filter(e=>(e.vehicleModel||"").toLowerCase().includes(l)||(e.licensePlate||"").toLowerCase().includes(l)||(e.vehicleType||"").toLowerCase().includes(l))}function Ae(l){s.vehicleId=l.id,S.value=`${l.vehicleModel} (${l.licensePlate||"—"})`,O.value=!1}const K=a(null);let p=null,pe=null,M=null,B=null,Q=[],U=null;const me=a(!1),J=a(null),X=a(null),Y=ae([]);let Z=null,ee=null,$=[];const te=a(!1),ge=a(null);let N=null,A=null;const k=a(null),H=a(-1),g=a({name:"",lat:null,lng:null,address:""}),R=a(""),j=a(""),L=ae([]);function Pe(){var l;if((l=window.google)!=null&&l.maps)fe(),ve();else{const e=document.createElement("script");e.src=`https://maps.googleapis.com/maps/api/js?key=${T.public.googleMapsApiKey}&libraries=places,geometry&callback=${de}`,e.async=!0,e.defer=!0,window[de]=()=>{try{delete window[de]}catch{}fe(),ve()},document.head.appendChild(e)}}function fe(){!K.value||p||(p=new google.maps.Map(K.value,{center:{lat:13.7563,lng:100.5018},zoom:6,mapTypeControl:!1,streetViewControl:!1,fullscreenControl:!0}),pe=new google.maps.Geocoder,new google.maps.places.PlacesService(p),me.value=!0,setTimeout(()=>google.maps.event.trigger(p,"resize"),0),P())}function ve(){var e,n;if(!((n=(e=window.google)==null?void 0:e.maps)!=null&&n.places))return;const l={fields:["place_id","name","formatted_address","geometry"],types:["geocode","establishment"]};J.value&&(Z=new google.maps.places.Autocomplete(J.value,l),Z.addListener("place_changed",()=>{const o=Z.getPlace();le("start",o)})),X.value&&(ee=new google.maps.places.Autocomplete(X.value,l),ee.addListener("place_changed",()=>{const o=ee.getPlace();le("end",o)}))}function Te(l){var o,i,r,v;if(!((i=(o=window.google)==null?void 0:o.maps)!=null&&i.places))return;const e=Y[l];if(!e)return;const n={fields:["place_id","name","formatted_address","geometry"],types:["geocode","establishment"]};(v=(r=$[l])==null?void 0:r.unbindAll)==null||v.call(r),$[l]=new google.maps.places.Autocomplete(e,n),$[l].addListener("place_changed",()=>{const y=$[l].getPlace();le("waypoint",y,l)})}function le(l,e,n=-1){var y,I,we,he,F,_e;if(!e)return;const o=(we=(I=(y=e.geometry)==null?void 0:y.location)==null?void 0:I.lat)==null?void 0:we.call(I),i=(_e=(F=(he=e.geometry)==null?void 0:he.location)==null?void 0:F.lng)==null?void 0:_e.call(F),r=e.name||e.formatted_address||"",v=ne(e.formatted_address||"");l==="start"?(R.value=r,s.startLocation={lat:o,lng:i,name:r,address:v}):l==="end"?(j.value=r,s.endLocation={lat:o,lng:i,name:r,address:v}):l==="waypoint"&&n>-1&&(L[n]=r,s.waypoints[n]={lat:o,lng:i,name:r,address:v}),P()}function P(){if(!p)return;M==null||M.setMap(null),M=null,B==null||B.setMap(null),B=null,Q.forEach(e=>e.setMap(null)),Q=[],U==null||U.setMap(null),U=null;const l=new google.maps.LatLngBounds;s.startLocation.lat&&s.startLocation.lng&&(M=new google.maps.Marker({position:s.startLocation,map:p,label:"A"}),l.extend(new google.maps.LatLng(s.startLocation.lat,s.startLocation.lng))),s.endLocation.lat&&s.endLocation.lng&&(B=new google.maps.Marker({position:s.endLocation,map:p,label:"B"}),l.extend(new google.maps.LatLng(s.endLocation.lat,s.endLocation.lng))),s.waypoints.length&&(Q=s.waypoints.filter(Boolean).map((e,n)=>new google.maps.Marker({position:{lat:e.lat,lng:e.lng},map:p,icon:"http://maps.google.com/mapfiles/ms/icons/green-dot.png",title:e.name||e.address||`จุดแวะ ${n+1}`})),s.waypoints.forEach(e=>{(e==null?void 0:e.lat)!=null&&(e==null?void 0:e.lng)!=null&&l.extend(new google.maps.LatLng(e.lat,e.lng))})),l.isEmpty()||(p.fitBounds(l),setTimeout(()=>{google.maps.event.trigger(p,"resize"),p.fitBounds(l)},0))}function se(l,e=-1){k.value=l,H.value=e,g.value={name:"",lat:null,lng:null,address:""},te.value=!0,Ce(()=>{var o;const n=l==="start"&&s.startLocation.lat?{lat:s.startLocation.lat,lng:s.startLocation.lng}:l==="end"&&s.endLocation.lat?{lat:s.endLocation.lat,lng:s.endLocation.lng}:e>-1&&((o=s.waypoints[e])!=null&&o.lat)?{lat:s.waypoints[e].lat,lng:s.waypoints[e].lng}:{lat:13.7563,lng:100.5018};N=new google.maps.Map(ge.value,{center:n,zoom:n.lat?14:6,mapTypeControl:!1,streetViewControl:!1,fullscreenControl:!1}),N.addListener("click",i=>Ve(i.latLng))})}function Ve(l){A?A.setPosition(l):(A=new google.maps.Marker({position:l,map:N,draggable:!0}),A.addListener("dragend",e=>ye(e.latLng))),ye(l)}async function ye(l){const e=l.lat(),n=l.lng(),o=await new Promise(v=>{pe.geocode({location:{lat:e,lng:n}},(y,I)=>{I==="OK"&&(y!=null&&y.length)?v(y[0]):v(null)})});let i=(o==null?void 0:o.formatted_address)||"";const r=ne((o==null?void 0:o.formatted_address)||"");g.value={name:ne(i),lat:e,lng:n,address:r}}function Ee(){var l;(l=g.value)!=null&&l.lat&&(k.value==="start"?(R.value=g.value.name,s.startLocation={...g.value}):k.value==="end"?(j.value=g.value.name,s.endLocation={...g.value}):k.value==="waypoint"&&H.value>-1&&(L[H.value]=g.value.name,s.waypoints[H.value]={...g.value}),oe(),P())}function oe(){te.value=!1,N=null,A=null}function Ue(){s.waypoints.push({lat:null,lng:null,name:"",address:""}),L.push(""),Ce(()=>Te(s.waypoints.length-1))}function Ne(l){s.waypoints.splice(l,1),L.splice(l,1),$.splice(l,1),Y.splice(l,1),P()}const C=a(!1),D=a(""),be=ke(()=>!!s.driverId&&!!s.vehicleId&&!!s.startLocation.lat&&!!s.endLocation.lat&&!!D.value&&s.availableSeats>0&&s.pricePerSeat>=0);function He(l){return new Date(l).toISOString()}async function Re(){var l;if(!be.value){G.warning("ข้อมูลไม่ครบถ้วน","กรุณากรอก/เลือกข้อมูลที่จำเป็นให้ครบ");return}C.value=!0;try{const e={driverId:s.driverId,vehicleId:s.vehicleId,startLocation:s.startLocation,endLocation:s.endLocation,waypoints:s.waypoints.filter(n=>n&&n.lat!=null&&n.lng!=null),departureTime:He(D.value),availableSeats:Number(s.availableSeats),pricePerSeat:Number(s.pricePerSeat),conditions:s.conditions||""};await $fetch("/routes/admin",{baseURL:T.public.apiBase,method:"POST",headers:{"Content-Type":"application/json",...h?{Authorization:`Bearer ${h}`}:{}},body:e}),G.success("สร้างเส้นทางสำเร็จ","บันทึกเส้นทางเรียบร้อย"),Ie("/admin/routes")}catch(e){console.error("Create route error:",e),G.error("เกิดข้อผิดพลาด",((l=e==null?void 0:e.data)==null?void 0:l.message)||"ไม่สามารถสร้างเส้นทางได้")}finally{C.value=!1}}function je(){Ie("/admin/routes")}function ne(l){return(l||"").replace(/,?\s*(Thailand|ไทย|ประเทศ)\s*$/i,"").replace(/\s{2,}/g," ").trim()}function De(){const l=document.getElementById("sidebar"),e=document.getElementById("overlay");!l||!e||(l.classList.remove("mobile-open"),e.classList.add("hidden"))}function Fe(){window.__adminResizeHandler__=function(){const l=document.getElementById("sidebar"),e=document.getElementById("main-content"),n=document.getElementById("overlay");!l||!e||!n||(window.innerWidth>=1024?(l.classList.remove("mobile-open"),n.classList.add("hidden"),e.style.marginLeft=l.classList.contains("collapsed")?"80px":"280px"):e.style.marginLeft="0",p&&me.value&&(google.maps.event.trigger(p,"resize"),P()))},window.addEventListener("resize",window.__adminResizeHandler__)}function qe(){window.removeEventListener("resize",window.__adminResizeHandler__||(()=>{})),delete window.__adminResizeHandler__}return Ke(async()=>{Fe(),typeof window.__adminResizeHandler__=="function"&&window.__adminResizeHandler__(),Pe()}),Qe(()=>{qe()}),(l,e)=>{const n=Ge;return c(),d("div",null,[q(tt),q(lt),t("main",st,[t("div",ot,[t("div",nt,[q(n,{to:"/admin/routes",class:"inline-flex items-center gap-2 px-3 py-2 border border-gray-300 rounded-md hover:bg-gray-50"},{default:Le(()=>e[11]||(e[11]=[t("i",{class:"fa-solid fa-arrow-left"},null,-1),t("span",null,"ย้อนกลับ",-1)])),_:1,__:[11]})]),e[29]||(e[29]=t("div",{class:"flex flex-col gap-3 mb-6 sm:flex-row sm:items-center sm:justify-between"},[t("div",{class:"flex items-center gap-3"},[t("h1",{class:"text-2xl font-semibold text-gray-800"},"สร้างเส้นทาง (แอดมิน)"),t("span",{class:"text-sm text-gray-500"},"กรอกข้อมูลเส้นทาง เลือกผู้ขับ และรถที่ใช้")])],-1)),t("div",at,[t("main",it,[t("section",null,[e[14]||(e[14]=t("h3",{class:"mb-3 text-sm font-semibold text-gray-700"},"ผู้ขับขี่และรถ",-1)),t("div",rt,[t("div",dt,[e[12]||(e[12]=t("label",{class:"block mb-2 text-sm font-medium text-gray-700"},[f(" เลือกผู้ขับขี่ (ค้นหา: อีเมล / ชื่อ / Username) "),t("span",{class:"text-red-500"},"*")],-1)),b(t("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>_.value=o),onInput:ze,type:"text",placeholder:"เช่น user@example.com หรือ User",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"},null,544),[[x,_.value,void 0,{trim:!0}]]),Se.value?(c(),d("div",ut,[(c(!0),d(ie,null,re(w.value,o=>(c(),d("button",{key:o.id,type:"button",onClick:i=>Me(o),class:"w-full px-3 py-2 text-left hover:bg-blue-50"},[t("div",pt,[f(u(o.firstName)+" "+u(o.lastName)+" ",1),o.username?(c(),d("span",mt,"(@"+u(o.username)+")",1)):m("",!0)]),t("div",gt,u(o.email),1)],8,ct))),128)),!V.value&&w.value.length===0?(c(),d("div",ft," ไม่พบผู้ใช้ที่ตรงกับคำค้น ")):m("",!0)])):m("",!0),s.driverId?m("",!0):(c(),d("p",vt,"* ต้องเลือกผู้ขับจากรายการ"))]),t("div",yt,[e[13]||(e[13]=t("label",{class:"block mb-2 text-sm font-medium text-gray-700"},[f(" เลือกรถของผู้ขับ "),t("span",{class:"text-red-500"},"*")],-1)),b(t("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>S.value=o),onFocus:e[2]||(e[2]=o=>O.value=!0),onInput:$e,type:"text",disabled:!s.driverId,placeholder:"ค้นหาด้วย รุ่น/ป้ายทะเบียน",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100"},null,40,bt),[[x,S.value,void 0,{trim:!0}]]),O.value&&s.driverId?(c(),d("div",xt,[(c(!0),d(ie,null,re(z.value,o=>(c(),d("button",{key:o.id,type:"button",onClick:i=>Ae(o),class:"w-full px-3 py-2 text-left hover:bg-blue-50"},[t("div",ht,[f(u(o.vehicleModel)+" ",1),t("span",_t,"("+u(o.vehicleType)+")",1)]),t("div",kt,u(o.licensePlate||"— ไม่มีป้าย —"),1)],8,wt))),128)),!W.value&&z.value.length===0?(c(),d("div",Lt," ไม่มีรถในรายการ ")):m("",!0)])):m("",!0),s.vehicleId?m("",!0):(c(),d("p",Ct,"* ต้องเลือกรถจากรายการ "))])])]),t("section",null,[e[15]||(e[15]=t("h3",{class:"mb-3 text-sm font-semibold text-gray-700"},"แผนที่เส้นทาง",-1)),t("div",It,[t("div",{ref_key:"mapEl",ref:K,class:"w-full",style:{height:"360px"}},null,512)])]),t("section",null,[e[20]||(e[20]=t("h3",{class:"mb-3 text-sm font-semibold text-gray-700"},"เส้นทาง",-1)),t("div",St,[t("div",null,[e[17]||(e[17]=t("label",{class:"block mb-1 text-xs font-medium text-gray-600"},[f("จุดเริ่มต้น "),t("span",{class:"text-red-500"},"*")],-1)),t("div",zt,[b(t("input",{ref_key:"startInputEl",ref:J,"onUpdate:modelValue":e[3]||(e[3]=o=>R.value=o),type:"text",placeholder:"พิมพ์ชื่อสถานที่ หรือใช้ปุ่มปักหมุด",class:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[x,R.value]]),t("button",{type:"button",onClick:e[4]||(e[4]=o=>se("start")),class:"absolute inset-y-0 my-auto text-gray-500 right-2 hover:text-blue-600",title:"เลือกจากแผนที่"},e[16]||(e[16]=[t("svg",{class:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor"},[t("path",{d:"M12 2a7 7 0 00-7 7c0 5.25 7 13 7 13s7-7.75 7-13a7 7 0 00-7-7zm0 9.5a2.5 2.5 0 110-5 2.5 2.5 0 010 5z"})],-1)]))]),s.startLocation.address?(c(),d("p",Mt,u(s.startLocation.address)+" ("+u(s.startLocation.lat)+", "+u(s.startLocation.lng)+") ",1)):m("",!0)]),t("div",null,[e[19]||(e[19]=t("label",{class:"block mb-1 text-xs font-medium text-gray-600"},[f("จุดปลายทาง "),t("span",{class:"text-red-500"},"*")],-1)),t("div",Bt,[b(t("input",{ref_key:"endInputEl",ref:X,"onUpdate:modelValue":e[5]||(e[5]=o=>j.value=o),type:"text",placeholder:"พิมพ์ชื่อสถานที่ หรือใช้ปุ่มปักหมุด",class:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[x,j.value]]),t("button",{type:"button",onClick:e[6]||(e[6]=o=>se("end")),class:"absolute inset-y-0 my-auto text-gray-500 right-2 hover:text-blue-600",title:"เลือกจากแผนที่"},e[18]||(e[18]=[t("svg",{class:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor"},[t("path",{d:"M12 2a7 7 0 00-7 7c0 5.25 7 13 7 13s7-7.75 7-13a7 7 0 00-7-7zm0 9.5a2.5 2.5 0 110-5 2.5 2.5 0 010 5z"})],-1)]))]),s.endLocation.address?(c(),d("p",$t,u(s.endLocation.address)+" ("+u(s.endLocation.lat)+", "+u(s.endLocation.lng)+") ",1)):m("",!0)])])]),t("section",null,[e[22]||(e[22]=t("h3",{class:"mb-3 text-sm font-semibold text-gray-700"},"จุดแวะระหว่างทาง",-1)),t("div",At,[(c(!0),d(ie,null,re(s.waypoints,(o,i)=>(c(),d("div",{key:i,class:"grid grid-cols-1 gap-3 sm:grid-cols-[1fr_auto]"},[t("div",Pt,[b(t("input",{ref_for:!0,ref:r=>Y[i]=r,"onUpdate:modelValue":r=>L[i]=r,type:"text",placeholder:"ชื่อสถานที่ / ที่อยู่",class:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,8,Tt),[[x,L[i]]]),t("button",{type:"button",onClick:r=>se("waypoint",i),class:"absolute inset-y-0 my-auto text-gray-500 right-2 hover:text-blue-600",title:"เลือกจากแผนที่"},e[21]||(e[21]=[t("svg",{class:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor"},[t("path",{d:"M12 2a7 7 0 00-7 7c0 5.25 7 13 7 13s7-7.75 7-13a7 7 0 00-7-7zm0 9.5a2.5 2.5 0 110-5 2.5 2.5 0 010 5z"})],-1)]),8,Vt),o.address?(c(),d("p",Et,u(o.address)+" ("+u(o.lat)+", "+u(o.lng)+") ",1)):m("",!0)]),t("div",Ut,[t("button",{type:"button",onClick:r=>Ne(i),class:"px-3 py-2 border border-gray-300 rounded-md hover:bg-gray-50"}," ลบ ",8,Nt)])]))),128)),t("button",{type:"button",onClick:Ue,class:"px-4 py-2 text-blue-700 border border-blue-600 rounded-md hover:bg-blue-50"}," + เพิ่มจุดแวะ ")])]),t("section",null,[e[26]||(e[26]=t("h3",{class:"mb-3 text-sm font-semibold text-gray-700"},"เวลา ราคา และความพร้อมที่นั่ง",-1)),t("div",Ht,[t("div",null,[e[23]||(e[23]=t("label",{class:"block mb-1 text-xs font-medium text-gray-600"},[f("วัน-เวลาออกเดินทาง "),t("span",{class:"text-red-500"},"*")],-1)),b(t("input",{"onUpdate:modelValue":e[7]||(e[7]=o=>D.value=o),type:"datetime-local",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[x,D.value]])]),t("div",null,[e[24]||(e[24]=t("label",{class:"block mb-1 text-xs font-medium text-gray-600"},[f("ราคา / ที่นั่ง (บาท) "),t("span",{class:"text-red-500"},"*")],-1)),b(t("input",{"onUpdate:modelValue":e[8]||(e[8]=o=>s.pricePerSeat=o),type:"number",min:"0",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[x,s.pricePerSeat,void 0,{number:!0}]])]),t("div",null,[e[25]||(e[25]=t("label",{class:"block mb-1 text-xs font-medium text-gray-600"},[f("ที่นั่งคงเหลือ "),t("span",{class:"text-red-500"},"*")],-1)),b(t("input",{"onUpdate:modelValue":e[9]||(e[9]=o=>s.availableSeats=o),type:"number",min:"1",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[x,s.availableSeats,void 0,{number:!0}]])])])]),t("section",null,[e[27]||(e[27]=t("h3",{class:"mb-3 text-sm font-semibold text-gray-700"},"เงื่อนไขการเดินทาง",-1)),b(t("textarea",{"onUpdate:modelValue":e[10]||(e[10]=o=>s.conditions=o),rows:"4",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"พิมพ์เงื่อนไข เช่น งดเปิดเพลงเสียงดัง, ไม่สูบบุหรี่ในรถ ฯลฯ"},null,512),[[x,s.conditions]])]),t("div",Rt,[t("button",{type:"button",onClick:je,disabled:C.value,class:"px-6 py-3 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-400 disabled:opacity-50"}," ยกเลิก ",8,jt),t("button",{type:"button",onClick:Re,disabled:!be.value||C.value,class:"flex items-center px-6 py-3 font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-blue-400 disabled:cursor-not-allowed"},[C.value?(c(),d("svg",Ft,e[28]||(e[28]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):m("",!0),f(" "+u(C.value?"กำลังสร้าง...":"สร้างเส้นทาง"),1)],8,Dt)])])])])]),t("div",{id:"overlay",class:"fixed inset-0 z-40 hidden bg-black bg-opacity-50 lg:hidden",onClick:De}),q(Je,{name:"modal-fade"},{default:Le(()=>[te.value?(c(),d("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/60",onClick:Ze(oe,["self"])},[t("div",qt,[t("div",Gt,[t("h3",Ot," เลือก"+u(k.value==="start"?"จุดเริ่มต้น":k.value==="end"?"จุดปลายทาง":"จุดแวะ"),1),t("button",{onClick:oe,class:"text-gray-400 hover:text-gray-600"},e[30]||(e[30]=[t("i",{class:"fa-solid fa-xmark"},null,-1)]))]),t("div",Wt,[t("div",{ref_key:"pickerMapEl",ref:ge,class:"w-full",style:{height:"65vh"}},null,512),t("div",Kt,[t("div",Qt,[e[31]||(e[31]=t("span",{class:"font-medium"},"ตำแหน่ง:",-1)),t("span",Jt,u(g.value.name||"— ยังไม่เลือก —"),1)]),t("button",{class:"px-4 py-2 text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed",disabled:!g.value.name,onClick:Ee}," ใช้ตำแหน่งนี้ ",8,Xt)])])])])):m("",!0)]),_:1})])}}},nl=Oe(Yt,[["__scopeId","data-v-aee89c0b"]]);export{nl as default};

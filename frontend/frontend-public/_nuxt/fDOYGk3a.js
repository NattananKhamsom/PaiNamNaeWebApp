import{_ as Oe}from"./Lcixqshc.js";import{_ as je,y as ve,J as Ve,r as c,A as De,x as Y,i as Ke,B as be,H as qe,c as p,b as G,a as l,w as ye,h as N,g as I,d as H,v as O,F as xe,q as _e,t as g,T as Ye,C as we,s as Ge,o as f,f as Fe}from"./DPSIKoxe.js";import{u as Qe}from"./BaxiziUg.js";import{A as Je,_ as We}from"./CaCOxDSn.js";import{d as he}from"./B5yDJBm8.js";import{s as Xe}from"./x_rD_Ya3.js";import"./DOK8vhV6.js";import"./Cpj98o6Y.js";const Ze={id:"main-content",class:"main-content mt-16 ml-0 lg:ml-[280px] p-6 min-h-screen"},et={class:"mx-auto max-w-7xl"},tt={class:"mb-8"},at={class:"flex w-full overflow-hidden bg-white border border-gray-300 rounded-lg shadow-lg"},lt={class:"flex-1 p-8 space-y-8"},st={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},nt={class:"relative"},ot={key:0,class:"absolute z-20 w-full mt-1 overflow-auto bg-white border rounded-md shadow max-h-60"},it=["onClick"],rt={class:"text-sm font-medium text-gray-800"},ut={class:"text-xs text-gray-500"},dt={key:0,class:"px-3 py-2 text-sm text-gray-500"},ct={key:1,class:"mt-2 text-xs text-amber-600"},mt={key:2,class:"mt-2 text-xs text-gray-600 truncate"},pt={class:"relative"},ft={key:0,class:"absolute z-20 w-full mt-1 overflow-auto bg-white border rounded-md shadow max-h-60"},gt=["onClick"],vt={class:"text-sm font-medium text-gray-800"},bt={key:0,class:"text-xs text-gray-500"},yt={class:"text-xs text-gray-500"},xt={key:0,class:"px-3 py-2 text-sm text-gray-500"},_t={key:1,class:"mt-2 text-xs text-amber-600"},wt={key:2,class:"mt-2 text-xs text-gray-600 truncate"},ht={class:"grid grid-cols-1 gap-4 sm:grid-cols-3"},kt=["max"],St={class:"mt-1 text-xs text-gray-500"},Ct=["value"],Pt=["value"],It={class:"grid grid-cols-1 gap-4 mt-4 sm:grid-cols-2"},Lt={class:"relative"},$t={class:"relative"},Tt={class:"flex justify-end gap-4 pt-2"},zt=["disabled"],Bt=["disabled"],Mt={key:0,class:"w-5 h-5 mr-3 -ml-1 text-white animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Et={class:"bg-white rounded-lg w-[95%] max-w-3xl overflow-hidden"},Rt={class:"flex items-center justify-between p-4 border-b border-gray-300"},Ut={class:"text-lg font-semibold text-gray-900"},At={class:"p-0"},Nt={class:"flex items-center justify-between p-4 border-t border-gray-200"},Ht={class:"text-sm text-gray-700 truncate"},Ot={class:"truncate"},jt=["disabled"],Vt={__name:"create",setup(Dt){var fe,ge;he.locale("th"),Qe({script:(fe=window.google)!=null&&fe.maps?[]:[{src:`https://maps.googleapis.com/maps/api/js?key=${ve().public.googleMapsApiKey}&libraries=places,geometry`,async:!0,defer:!0}]});const{toast:j}=Ge(),F=ve(),L=((ge=Ve("token"))==null?void 0:ge.value)||localStorage.getItem("token"),$=c(!1),M=De({numberOfSeats:1}),_=c(""),w=c(""),h=c({lat:null,lng:null,placeId:null,address:null,name:null}),k=c({lat:null,lng:null,placeId:null,address:null,name:null}),T=c(""),E=c(""),x=c(null),Q=c(""),S=c([]),V=c(!1),te=c(""),ke=Y(()=>T.value&&(V.value||S.value.length>0));function ae(t){var a,i;const e=((a=t.startLocation)==null?void 0:a.name)||"ต้นทาง",s=((i=t.endLocation)==null?void 0:i.name)||"ปลายทาง",n=t.driver?`${t.driver.firstName||""} ${t.driver.lastName||""}`.trim():"";return`${e} → ${s}${n?" • "+n:""}`}function J(t){return t?he(t).format("D MMM YYYY HH:mm"):"-"}let le=null;async function Se(){T.value!==te.value&&(E.value="",x.value=null,Q.value=""),clearTimeout(le);const t=T.value.trim();if(!t){S.value=[];return}le=setTimeout(async()=>{try{V.value=!0;const e=await $fetch("/routes/admin",{baseURL:F.public.apiBase,headers:{Accept:"application/json",...L?{Authorization:`Bearer ${L}`}:{}},query:{q:t,page:1,limit:10}});S.value=(e==null?void 0:e.data)||[]}catch{S.value=[]}finally{V.value=!1}},300)}function Ce(t){E.value=t.id,x.value=t;const e=`${ae(t)} • ${J(t.departureTime)}`;T.value=e,te.value=e,Q.value=e,S.value=[]}const z=c(""),R=c(""),se=c(""),C=c([]),D=c(!1),ne=c(""),Pe=Y(()=>z.value&&(D.value||C.value.length>0));let oe=null;async function Ie(){z.value!==ne.value&&(R.value=""),clearTimeout(oe);const t=z.value.trim();if(!t){C.value=[];return}oe=setTimeout(async()=>{try{D.value=!0;const e=await $fetch("/users/admin",{baseURL:F.public.apiBase,headers:{Accept:"application/json",...L?{Authorization:`Bearer ${L}`}:{}},query:{q:t,page:1,limit:10}});C.value=(e==null?void 0:e.data)||[]}catch{C.value=[]}finally{D.value=!1}},300)}function Le(t){R.value=t.id;const e=`${t.firstName||""} ${t.lastName||""} (${t.username?"@"+t.username:t.email})`;z.value=e,ne.value=e,se.value=e,C.value=[]}const W=c(null),X=c(null),B=c(null),ie=c(null);let K=null,U=null,A=null,P=null;const b=c({name:"",lat:null,lng:null,placeId:null,address:null});function re(){var t;if((t=window.google)!=null&&t.maps&&(A||(A=new google.maps.Geocoder),!P)){const e=document.createElement("div"),s=new google.maps.Map(e,{center:{lat:13.7563,lng:100.5018},zoom:3});P=new google.maps.places.PlacesService(s)}}function ue(){var e,s;if(!((s=(e=window.google)==null?void 0:e.maps)!=null&&s.places))return;re();const t={fields:["place_id","name","formatted_address","geometry"],types:["geocode","establishment"],componentRestrictions:{country:["th"]}};if(W.value){const n=new google.maps.places.Autocomplete(W.value,t);n.addListener("place_changed",()=>{var i,o,u,r,d,m;const a=n.getPlace();a&&(_.value=a.name||a.formatted_address||_.value,h.value={lat:((u=(o=(i=a.geometry)==null?void 0:i.location)==null?void 0:o.lat)==null?void 0:u.call(o))??null,lng:((m=(d=(r=a.geometry)==null?void 0:r.location)==null?void 0:d.lng)==null?void 0:m.call(d))??null,placeId:a.place_id||null,address:a.formatted_address||null,name:a.name||null})})}if(X.value){const n=new google.maps.places.Autocomplete(X.value,t);n.addListener("place_changed",()=>{var i,o,u,r,d,m;const a=n.getPlace();a&&(w.value=a.name||a.formatted_address||w.value,k.value={lat:((u=(o=(i=a.geometry)==null?void 0:i.location)==null?void 0:o.lat)==null?void 0:u.call(o))??null,lng:((m=(d=(r=a.geometry)==null?void 0:r.location)==null?void 0:d.lng)==null?void 0:m.call(d))??null,placeId:a.place_id||null,address:a.formatted_address||null,name:a.name||null})})}}function de(t){B.value=t,b.value={name:"",lat:null,lng:null,placeId:null,address:null},be(()=>{re();const e={lat:13.7563,lng:100.5018},s=t==="pickup"?h.value:k.value,n=s.lat&&s.lng?{lat:s.lat,lng:s.lng}:e;K=new google.maps.Map(ie.value,{center:n,zoom:s.lat?15:6,mapTypeControl:!1,streetViewControl:!1,fullscreenControl:!1}),K.addListener("click",async a=>{const i=a.latLng;$e(i),await ce(i)})})}function Z(){B.value=null,K=null,U=null}function $e(t){if(U)return U.setPosition(t);U=new google.maps.Marker({position:t,map:K,draggable:!0}),U.addListener("dragend",e=>ce(e.latLng))}async function ce(t){const e=t.lat(),s=t.lng(),n=await new Promise(u=>{A.geocode({location:{lat:e,lng:s}},(r,d)=>{d==="OK"&&(r!=null&&r.length)?u(r[0]):u(null)})});let a="",i=(n==null?void 0:n.place_id)||null,o=(n==null?void 0:n.formatted_address)||null;if(n&&(a=await Me(n)),!a){const u=await Be(e,s,120);if(u!=null&&u.place_id){i=u.place_id;const r=await new Promise(d=>{P.getDetails({placeId:u.place_id,fields:["name","formatted_address"]},(m,v)=>d(v===google.maps.places.PlacesServiceStatus.OK?m:null))});a=(r==null?void 0:r.name)||u.name||a,o=(r==null?void 0:r.formatted_address)||o}}o&&(o=o.replace(/,?\s*(Thailand|ไทย|ประเทศ)\s*$/i,"")),b.value={name:a,lat:e,lng:s,placeId:i,address:o}}function Te(){if(!B.value||!b.value.name)return;const t={lat:b.value.lat,lng:b.value.lng,placeId:b.value.placeId,address:b.value.address,name:b.value.name};B.value==="pickup"?(_.value=t.name||t.address||"",h.value=t):(w.value=t.name||t.address||"",k.value=t),Z()}function ze(t){var u,r,d;const e=(t==null?void 0:t.statusCode)||(t==null?void 0:t.status)||((u=t==null?void 0:t.response)==null?void 0:u.status)||((r=t==null?void 0:t.data)==null?void 0:r.statusCode),s=((d=t==null?void 0:t.data)==null?void 0:d.message)||(t==null?void 0:t.message)||"",n=String(s||"").trim(),a=n.toLowerCase();let i="เกิดข้อผิดพลาด",o=n||"ไม่สามารถสร้างการจองได้";return/driver cannot book their own route/i.test(n)?(i="ไม่สามารถดำเนินการ",o="ผู้ขับไม่สามารถจองเส้นทางของตนเองได้ (Driver cannot book their own route.)"):/booking already exists|duplicate booking/i.test(a)||e===409?(i="ข้อมูลซ้ำ",o=n||"มีคำขอจองนี้อยู่ในระบบแล้ว"):/no available seats|route .* full|insufficient seats|exceeds available seats/i.test(a)?(i="ที่นั่งไม่เพียงพอ",o="จำนวนที่นั่งไม่พอหรือเส้นทางเต็มแล้ว"):/route not found/i.test(a)?(i="ไม่พบเส้นทาง",o="กรุณาเลือกเส้นทางใหม่อีกครั้ง"):/passenger not found|user not found/i.test(a)?(i="ไม่พบผู้โดยสาร",o="ตรวจสอบผู้โดยสารที่เลือกอีกครั้ง"):e===400?(i="ข้อมูลไม่ถูกต้อง",o=n||"รูปแบบข้อมูลไม่ถูกต้อง"):(e===401||e===403)&&(i="ไม่ได้รับอนุญาต",o="สิทธิ์ไม่เพียงพอสำหรับการกระทำนี้"),{title:i,body:o,status:e,raw:n}}function Be(t,e,s=100){return new Promise(n=>{if(!P)return n(null);P.nearbySearch({location:{lat:t,lng:e},radius:s},(a,i)=>{i===google.maps.places.PlacesServiceStatus.OK&&(a!=null&&a.length)?n(a[0]):n(null)})})}async function Me(t){const e=t.address_components||[],s=m=>{var v;return(v=e.find(y=>y.types.includes(m)))==null?void 0:v.long_name},n=m=>{var v;return(v=e.find(y=>y.types.includes(m)))==null?void 0:v.short_name},a=t.types||[];if((a.includes("point_of_interest")||a.includes("establishment")||a.includes("premise"))&&t.place_id&&P){const m=await new Promise(v=>{P.getDetails({placeId:t.place_id,fields:["name"]},(y,q)=>v(q===google.maps.places.PlacesServiceStatus.OK?y==null?void 0:y.name:null))});if(m)return m}const o=s("street_number"),u=s("route");let r=o&&u?`${o} ${u}`:u||t.formatted_address||"";const d=s("administrative_area_level_1")||n("administrative_area_level_1");return d&&(r=r.replace(new RegExp(`,?\\s*(${d}|Thailand|ไทย)\\s*$`,"i"),"")),r.trim()}const ee=Y(()=>{var t;return((t=x.value)==null?void 0:t.availableSeats)??null}),me=Y(()=>!!E.value&&!!R.value&&M.numberOfSeats>=1&&(!ee.value||M.numberOfSeats<=ee.value)&&(!!h.value.lat||!!_.value)&&(!!k.value.lat||!!w.value));async function pe(t){return new Promise(e=>{if(!t||!A)return e(null);A.geocode({address:t},(s,n)=>{var i,o,u,r,d,m,v,y,q;if(n!=="OK"||!(s!=null&&s.length))return e(null);const a=s[0];e({lat:((u=(o=(i=a.geometry)==null?void 0:i.location)==null?void 0:o.lat)==null?void 0:u.call(o))??null,lng:((m=(d=(r=a.geometry)==null?void 0:r.location)==null?void 0:d.lng)==null?void 0:m.call(d))??null,placeId:a.place_id||null,address:((v=a.formatted_address)==null?void 0:v.replace(/,?\s*(Thailand|ไทย|ประเทศ)\s*$/i,""))||null,name:((q=(y=a.address_components)==null?void 0:y[0])==null?void 0:q.long_name)||a.formatted_address||null})})})}async function Ee(){var t;if(!me.value){j.warning("ข้อมูลไม่ครบถ้วน","กรุณาเลือกเส้นทาง/ผู้โดยสาร ระบุจำนวนที่นั่ง และกำหนดจุดรับ-ส่งให้ถูกต้อง");return}if(_.value&&!h.value.lat){const e=await pe(_.value);e&&(h.value=e)}if(w.value&&!k.value.lat){const e=await pe(w.value);e&&(k.value=e)}if(!h.value.lat||!k.value.lat){j.warning("ข้อมูลไม่ครบถ้วน","กรุณาเลือกจุดขึ้นรถและจุดลงรถจากรายการหรือปักหมุดบนแผนที่");return}$.value=!0;try{const e={routeId:E.value,passengerId:R.value,numberOfSeats:Number(M.numberOfSeats),pickupLocation:h.value,dropoffLocation:k.value},s=await $fetch("/bookings/admin",{baseURL:F.public.apiBase,method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",...L?{Authorization:`Bearer ${L}`}:{}},body:e});j.success("สร้างการจองสำเร็จ","บันทึกการจองเรียบร้อย");const n=((t=s==null?void 0:s.data)==null?void 0:t.id)||"";we(n?`/admin/bookings/${n}`:"/admin/bookings").catch(()=>{})}catch(e){const s=ze(e);console.error("Create booking error:",{status:s.status,message:s.raw}),j.error(s.title,s.body)}finally{$.value=!1}}function Re(){we("/admin/bookings")}function Ue(){const t=document.getElementById("sidebar"),e=document.getElementById("overlay");!t||!e||(t.classList.remove("mobile-open"),e.classList.add("hidden"))}function Ae(){window.__adminResizeHandler__=function(){const t=document.getElementById("sidebar"),e=document.getElementById("main-content"),s=document.getElementById("overlay");!t||!e||!s||(window.innerWidth>=1024?(t.classList.remove("mobile-open"),s.classList.add("hidden"),e.style.marginLeft=t.classList.contains("collapsed")?"80px":"280px"):e.style.marginLeft="0")},window.addEventListener("resize",window.__adminResizeHandler__)}function Ne(){window.removeEventListener("resize",window.__adminResizeHandler__||(()=>{})),delete window.__adminResizeHandler__}function He(){var e,s;if((s=(e=window.google)==null?void 0:e.maps)!=null&&s.places){ue();return}const t=Xe(()=>{var n,a;(a=(n=window.google)==null?void 0:n.maps)!=null&&a.places&&(clearInterval(t),ue())},100)}return Ke(()=>{Ae(),typeof window.__adminResizeHandler__=="function"&&window.__adminResizeHandler__(),be(()=>He())}),qe(()=>{Ne()}),(t,e)=>{var n;const s=Oe;return f(),p("div",null,[G(Je),G(We),l("main",Ze,[l("div",et,[l("div",tt,[G(s,{to:"/admin/bookings",class:"inline-flex items-center gap-2 px-3 py-2 border border-gray-300 rounded-md hover:bg-gray-50"},{default:ye(()=>e[7]||(e[7]=[l("i",{class:"fa-solid fa-arrow-left"},null,-1),l("span",null,"ย้อนกลับ",-1)])),_:1,__:[7]})]),e[20]||(e[20]=l("div",{class:"flex flex-col gap-3 mb-6 sm:flex-row sm:items-center sm:justify-between"},[l("div",{class:"flex items-center gap-3"},[l("h1",{class:"text-2xl font-semibold text-gray-800"},"สร้างการจอง (แอดมิน)"),l("span",{class:"text-sm text-gray-500"},"เลือกเส้นทางและผู้โดยสาร จากนั้นกำหนดจำนวนที่นั่งและจุดรับ-ส่ง")])],-1)),l("div",at,[l("main",lt,[l("section",null,[e[10]||(e[10]=l("h3",{class:"mb-3 text-sm font-semibold text-gray-700"},"เส้นทางและผู้โดยสาร",-1)),l("div",st,[l("div",nt,[e[8]||(e[8]=l("label",{class:"block mb-2 text-sm font-medium text-gray-700"},[H(" เลือกเส้นทาง (ค้นหา: ต้นทาง/ปลายทาง/ผู้ขับ/เวลา) "),l("span",{class:"text-red-500"},"*")],-1)),N(l("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>T.value=a),onInput:Se,type:"text",placeholder:"เช่น มข. → เซ็นทรัล / ชื่อคนขับ / เวลา",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"},null,544),[[O,T.value,void 0,{trim:!0}]]),ke.value?(f(),p("div",ot,[(f(!0),p(xe,null,_e(S.value,a=>(f(),p("button",{key:a.id,type:"button",onClick:i=>Ce(a),class:"w-full px-3 py-2 text-left hover:bg-blue-50"},[l("div",rt,g(ae(a)),1),l("div",ut,g(J(a.departureTime))+" • ที่นั่งคงเหลือ "+g(a.availableSeats)+" • ฿"+g(a.pricePerSeat)+"/ที่นั่ง ",1)],8,it))),128)),!V.value&&S.value.length===0?(f(),p("div",dt," ไม่พบเส้นทางที่ตรงกับคำค้น ")):I("",!0)])):I("",!0),E.value?(f(),p("p",mt,"เลือกแล้ว: "+g(Q.value),1)):(f(),p("p",ct,"* ต้องเลือกเส้นทางจากรายการ"))]),l("div",pt,[e[9]||(e[9]=l("label",{class:"block mb-2 text-sm font-medium text-gray-700"},[H(" เลือกผู้โดยสาร (ค้นหา: อีเมล / ชื่อ / Username) "),l("span",{class:"text-red-500"},"*")],-1)),N(l("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>z.value=a),onInput:Ie,type:"text",placeholder:"เช่น user1@gmail.com / User1",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"},null,544),[[O,z.value,void 0,{trim:!0}]]),Pe.value?(f(),p("div",ft,[(f(!0),p(xe,null,_e(C.value,a=>(f(),p("button",{key:a.id,type:"button",onClick:i=>Le(a),class:"w-full px-3 py-2 text-left hover:bg-blue-50"},[l("div",vt,[H(g(a.firstName)+" "+g(a.lastName)+" ",1),a.username?(f(),p("span",bt,"(@"+g(a.username)+")",1)):I("",!0)]),l("div",yt,g(a.email),1)],8,gt))),128)),!D.value&&C.value.length===0?(f(),p("div",xt," ไม่พบผู้ใช้ที่ตรงกับคำค้น ")):I("",!0)])):I("",!0),R.value?(f(),p("p",wt,"เลือกแล้ว: "+g(se.value),1)):(f(),p("p",_t,"* ต้องเลือกผู้โดยสารจากรายการ"))])])]),l("section",null,[e[18]||(e[18]=l("h3",{class:"mb-3 text-sm font-semibold text-gray-700"},"รายละเอียดการจอง",-1)),l("div",ht,[l("div",null,[e[11]||(e[11]=l("label",{class:"block mb-1 text-xs font-medium text-gray-600"},[H(" จำนวนที่นั่ง "),l("span",{class:"text-red-500"},"*")],-1)),N(l("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>M.numberOfSeats=a),type:"number",min:"1",max:ee.value||void 0,class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,8,kt),[[O,M.numberOfSeats,void 0,{number:!0}]]),l("p",St,g(((n=x.value)==null?void 0:n.availableSeats)!=null?`เลือกได้สูงสุด ${x.value.availableSeats} ที่นั่ง`:"กรุณาเลือกเส้นทางก่อน"),1)]),l("div",null,[e[12]||(e[12]=l("label",{class:"block mb-1 text-xs font-medium text-gray-600"},"ราคาต่อที่นั่ง (อ้างอิงจากเส้นทาง)",-1)),l("input",{value:x.value?x.value.pricePerSeat:"",disabled:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md disabled:bg-gray-100"},null,8,Ct)]),l("div",null,[e[13]||(e[13]=l("label",{class:"block mb-1 text-xs font-medium text-gray-600"},"เวลาออกเดินทาง",-1)),l("input",{value:x.value?J(x.value.departureTime):"",disabled:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md disabled:bg-gray-100"},null,8,Pt)])]),l("div",It,[l("div",null,[e[15]||(e[15]=l("label",{class:"block mb-2 text-sm font-medium text-gray-700"},"เลือกจุดขึ้นรถ",-1)),l("div",Lt,[N(l("input",{ref_key:"pickupInputEl",ref:W,"onUpdate:modelValue":e[3]||(e[3]=a=>_.value=a),type:"text",placeholder:"พิมพ์ชื่อสถานที่...",class:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[O,_.value]]),l("button",{type:"button",onClick:e[4]||(e[4]=a=>de("pickup")),class:"absolute inset-y-0 my-auto text-gray-500 right-2 hover:text-blue-600",title:"เลือกจากแผนที่"},e[14]||(e[14]=[l("svg",{class:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor"},[l("path",{d:"M12 2a7 7 0 00-7 7c0 5.25 7 13 7 13s7-7.75 7-13a7 7 0 00-7-7zm0 9.5a2.5 2.5 0 110-5 2.5 2.5 0 010 5z"})],-1)]))])]),l("div",null,[e[17]||(e[17]=l("label",{class:"block mb-2 text-sm font-medium text-gray-700"},"เลือกจุดลงรถ",-1)),l("div",$t,[N(l("input",{ref_key:"dropoffInputEl",ref:X,"onUpdate:modelValue":e[5]||(e[5]=a=>w.value=a),type:"text",placeholder:"พิมพ์ชื่อสถานที่...",class:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[O,w.value]]),l("button",{type:"button",onClick:e[6]||(e[6]=a=>de("dropoff")),class:"absolute inset-y-0 my-auto text-gray-500 right-2 hover:text-blue-600",title:"เลือกจากแผนที่"},e[16]||(e[16]=[l("svg",{class:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor"},[l("path",{d:"M12 2a7 7 0 00-7 7c0 5.25 7 13 7 13s7-7.75 7-13a7 7 0 00-7-7zm0 9.5a2.5 2.5 0 110-5 2.5 2.5 0 010 5z"})],-1)]))])])])]),l("div",Tt,[l("button",{type:"button",onClick:Re,disabled:$.value,class:"px-6 py-3 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-400 disabled:opacity-50"}," ยกเลิก ",8,zt),l("button",{type:"button",onClick:Ee,disabled:!me.value||$.value,class:"flex items-center px-6 py-3 font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-blue-400 disabled:cursor-not-allowed"},[$.value?(f(),p("svg",Mt,e[19]||(e[19]=[l("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),l("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):I("",!0),H(" "+g($.value?"กำลังสร้าง...":"สร้างการจอง"),1)],8,Bt)])])])])]),l("div",{id:"overlay",class:"fixed inset-0 z-40 hidden bg-black bg-opacity-50 lg:hidden",onClick:Ue}),G(Ye,{name:"modal-fade"},{default:ye(()=>[B.value?(f(),p("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/60",onClick:Fe(Z,["self"])},[l("div",Et,[l("div",Rt,[l("h3",Ut," เลือก"+g(B.value==="pickup"?"จุดขึ้นรถ":"จุดลงรถ"),1),l("button",{onClick:Z,class:"text-gray-400 hover:text-gray-600"},e[21]||(e[21]=[l("i",{class:"fa-solid fa-xmark"},null,-1)]))]),l("div",At,[l("div",{ref_key:"bookingPickerMapEl",ref:ie,class:"w-full",style:{height:"65vh"}},null,512),l("div",Nt,[l("div",Ht,[e[22]||(e[22]=l("span",{class:"font-medium"},"ตำแหน่ง:",-1)),l("span",Ot,g(b.value.name||"— ยังไม่เลือก —"),1)]),l("button",{class:"px-4 py-2 text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed",disabled:!b.value.name,onClick:Te}," ใช้ตำแหน่งนี้ ",8,jt)])])])])):I("",!0)]),_:1})])}}},Xt=je(Vt,[["__scopeId","data-v-2ad7631d"]]);export{Xt as default};

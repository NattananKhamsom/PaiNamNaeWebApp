import{m as i,J as l,u as m}from"./DPSIKoxe.js";function y(){const{$api:n}=i(),r={maxAge:3600*24*7,path:"/",sameSite:"lax",secure:!0},s=l("token",r),o=l("user",r),c=m();return{token:s,user:o,login:async(e,a)=>{const t={password:a};e.includes("@")?t.email=e:t.username=e;const u=await n("/auth/login",{method:"POST",body:t});return s.value=u.token,o.value=u.user,u},logout:()=>(s.value=null,o.value=null,c.push("/")),register:async e=>await n("/users",{method:"POST",body:e})}}export{y as u};

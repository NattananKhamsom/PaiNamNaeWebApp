import{_ as h}from"./Lcixqshc.js";import{u as I}from"./DOK8vhV6.js";import{_ as U,c,a as t,g as v,t as l,f as w,h as a,d,z as S,e as R,v as u,b as V,w as k,m as E,D as _,r as p,s as T,o as g}from"./DPSIKoxe.js";const A={layout:"default",middleware:"auth",setup(){const{$api:f}=E(),e=_(),{user:b}=I(),o=T(),s=p({type:"",title:"",description:"",reportedUserId:"",attachmentUrl:""}),i=p(!1),n=p(""),r=p("");return{form:s,loading:i,successMessage:n,errorMessage:r,submitReport:async()=>{var x,y;try{i.value=!0,r.value="",n.value="";const m={type:s.value.type,title:s.value.title,description:s.value.description,reportedUserId:s.value.reportedUserId||void 0,attachmentUrl:s.value.attachmentUrl||void 0},G=await f.post("/incidents",m);n.value="Incident reported successfully! Our admin team will review it shortly.",o.addToast("Incident reported successfully","success"),s.value={type:"",title:"",description:"",reportedUserId:"",attachmentUrl:""},setTimeout(()=>{e.push("/profile")},2e3)}catch(m){r.value=((y=(x=m.response)==null?void 0:x.data)==null?void 0:y.message)||"Failed to report incident",o.addToast(r.value,"error")}finally{i.value=!1}},user:b}}},M={class:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8"},D={class:"max-w-2xl mx-auto"},N={class:"bg-white rounded-lg shadow-md p-6 md:p-8"},B={key:0,class:"mb-4 p-4 bg-green-50 border border-green-200 rounded-lg"},H={class:"text-green-800"},L={key:1,class:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg"},O={class:"text-red-800"},C={class:"text-xs text-gray-500 mt-1"},q={class:"text-xs text-gray-500 mt-1"},F={class:"flex gap-4 pt-6"},P=["disabled"];function j(f,e,b,o,s,i){const n=h;return g(),c("div",M,[t("div",D,[t("div",N,[e[15]||(e[15]=t("div",{class:"mb-8"},[t("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Report Incident"),t("p",{class:"text-gray-600"},"Help us maintain a safe community by reporting incidents")],-1)),o.successMessage?(g(),c("div",B,[t("p",H,l(o.successMessage),1)])):v("",!0),o.errorMessage?(g(),c("div",L,[t("p",O,l(o.errorMessage),1)])):v("",!0),t("form",{onSubmit:e[5]||(e[5]=w((...r)=>o.submitReport&&o.submitReport(...r),["prevent"])),class:"space-y-6"},[t("div",null,[e[7]||(e[7]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[d(" Incident Type "),t("span",{class:"text-red-500"},"*")],-1)),a(t("select",{"onUpdate:modelValue":e[0]||(e[0]=r=>o.form.type=r),required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},e[6]||(e[6]=[R('<option value="">-- Select incident type --</option><option value="DRIVER_BEHAVIOR">Driver Behavior Issue</option><option value="PASSENGER_BEHAVIOR">Passenger Behavior Issue</option><option value="SAFETY_ISSUE">Safety Issue</option><option value="VEHICLE_ISSUE">Vehicle Issue</option><option value="HARASSMENT">Harassment</option><option value="OTHER">Other</option>',7)]),512),[[S,o.form.type]])]),t("div",null,[e[8]||(e[8]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[d(" Title "),t("span",{class:"text-red-500"},"*")],-1)),a(t("input",{"onUpdate:modelValue":e[1]||(e[1]=r=>o.form.title=r),type:"text",placeholder:"Brief title of the incident",required:"",maxlength:"100",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[u,o.form.title]]),t("p",C,l(o.form.title.length)+"/100 characters",1)]),t("div",null,[e[9]||(e[9]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[d(" Description "),t("span",{class:"text-red-500"},"*")],-1)),a(t("textarea",{"onUpdate:modelValue":e[2]||(e[2]=r=>o.form.description=r),placeholder:"Detailed description of the incident (minimum 10 characters)",required:"",rows:"5",maxlength:"2000",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[u,o.form.description]]),t("p",q,l(o.form.description.length)+"/2000 characters",1)]),t("div",null,[e[10]||(e[10]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Report Against (optional) ",-1)),a(t("input",{"onUpdate:modelValue":e[3]||(e[3]=r=>o.form.reportedUserId=r),type:"text",placeholder:"User ID or username (if known)",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[u,o.form.reportedUserId]]),e[11]||(e[11]=t("p",{class:"text-xs text-gray-500 mt-1"},"Leave empty if you don't know the user ID",-1))]),t("div",null,[e[12]||(e[12]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Attachment URL (optional) ",-1)),a(t("input",{"onUpdate:modelValue":e[4]||(e[4]=r=>o.form.attachmentUrl=r),type:"url",placeholder:"https://example.com/photo.jpg",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[u,o.form.attachmentUrl]]),e[13]||(e[13]=t("p",{class:"text-xs text-gray-500 mt-1"},"Link to evidence photo or document",-1))]),t("div",F,[t("button",{type:"submit",disabled:o.loading,class:"flex-1 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white font-medium py-2 px-4 rounded-lg transition"},l(o.loading?"Submitting...":"Submit Report"),9,P),V(n,{to:"/profile",class:"flex-1 bg-gray-300 hover:bg-gray-400 text-gray-900 font-medium py-2 px-4 rounded-lg text-center transition"},{default:k(()=>e[14]||(e[14]=[d(" Cancel ")])),_:1,__:[14]})])],32)])])])}const Q=U(A,[["render",j]]);export{Q as default};
